---
title: "Creating Professional Websites with R Blogdown"
subtitle: "Resul Umit"
institute: ""
date: "May 2020"
output:
  xaringan::moon_reader:
    lib_dir: libs
    nature:
      highlightStyle: github
      highlightLines: true
      highlightSpans: true
      countIncrementalSlides: false
      ratio: "16:9"
---

```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE, crayon.enabled = TRUE)

library(crayon)
library(fansi)
library(dplyr)
library(ggplot2)
library(stargazer)
library(countdown)

# data
df <- mtcars %>%
      mutate(disp_litre = disp / 61.0237)

# regresion models
lm1 <- lm(mpg ~ cyl, data = df)
lm2 <- lm(mpg ~ cyl + disp_litre, data = df)

```

<style type="text/css">

.hljs-github .hljs {
    background: #e5e5e5;
}

.inline-c, remark-inline-code {
   background: #e5e5e5;
   border-radius: 3px;
   padding: 4px;
   font-family: 'Source Code Pro', 'Lucida Console', Monaco, monospace;
}


.yellow-h{
   background: #ffff88;
}


.out-t, remark-inline-code {
   background: #9fff9f;
   border-radius: 3px;
   padding: 4px;
   
}

.pull-left-c {
    float: left;
    width: 58%;
    
}

.pull-right-c {
    float: right;
    width: 38%;
    
}

.medium {
    font-size: 75%
    
}

.small {
    font-size: 50%
    }

.action {
    background-color: #f2eecb;
  
}


</style>


## Who am I?

Resul Umit

- post-doctoral researcher and lecturer at the Department of Political Science, University of Lucerne

- interested in representation, elections, and parliaments
    - [most recent publication](https://doi.org/10.1080/17457289.2019.1604529):
    When members of parliament disagree with their principals (country, constituency, party), how do they justify this to them?    

- more information and work available at [resulumit.com](https://resulumit.com/)

---
## My First Website

Using WordPress

- opened just before starting my PhD in 2013, at [https://wordpress.com/](https://wordpress.com/)

- at first, with rare updates
    - none based on data
    - required getting used to at every login
        - a system that I used only for my website

- then, with more frequent blogposts
    - frustrations with posts based on data 
        - slow to write and edit
    - still required getting used to at every login
    
---
## My Current Website

Using `blogdown`, based on `Hugo`, `rmarkdown`, and the `Finite` theme

- migrated from WordPress in 2018

- ~~frustrations with blogposts based on data~~ 
    - ~~slow to write and edit~~
    - `rmarkdown` makes quantitative academic writing efficient

- ~~required getting used to at every login~~
    - ~~a system used only for website updates~~
    - a system that I use everyday for other tasks
        - cleaning and analysing data, writing results for publication

---
## Websites for Academics &mdash; Motivations

- Academic outreach
    - make your work easily accessible to other academics
      - all work in one address
      - versions without paywall
            - e.g., pre-prints

--

- Public outreach
    - make your work easily accessible to non-academics, in two senses
      - by removing paywalls
          - e.g., pre-prints
      - by writing for non-academic audience in mind
          - e.g., blogposts
            
--

- Impression management
    - manage your online presence yourself
        - otherwise, others will
            - e.g., your (past and present) university
    - provide a concrete example of your skills
        - with R, Git 

---
## The Workshop &mdash; Overview

- Two half days, on how to create websites for academics with R

  - 09.15 &ndash; 17:00

--

- Based on personalising the example site of the `Academic` theme
  
  - building a minimal working site
  - version-controlling and deploying it
  - adding new content to the site

--

- Designed for researchers with basic knowledge of R programming language

  - ability to work with R and RStudio will be very helpful
      - but not absolutely necessary &mdash; these skills can be developed after learning R Blogdown as well    

---
## The Workshop &mdash; Limitations

- Covers static websites, as generated by `Hugo`, as integrated into R by `blogdown`
    - limited by what this setting offers
        - they offer a lot, but not everything is possible
        - e.g., ~~dynamic websites~~

--

- Does not cover structural (HMTL, CSS, or JavaScript) customisation
    - ~~changing the entire appearance and functionality of the theme, writing a new one~~
    - but, you can always switch to another Hugo theme
        - see 300+ options at [https://themes.gohugo.io/](https://themes.gohugo.io/)
     
--

- Does not cover multi-language or multi-author websites
    - but, these are possible, and well documented in `Academic`
        - e.g, for multi-lingual websites, see [https://sourcethemes.com/academic/docs/language/](https://sourcethemes.com/academic/docs/language/)
        
---
## The Workshop &mdash; Organisation

- Originally planned as a face-to-face workshop
    - now digital, with its own challenges

--

- We will be building websites
    - I will share my screen, and talk over my own edits
    - some of these edits are self explanatory, thanks to the documentation in `Academic`
        - feel free to mute me during your edits

--

- When you have a problem, don't get stuck and suffer in silence
    - turn your microphone on and interrupt
    - or, type in Zoom Chat *for everyone*
        - help if you know the solution to someone else's problem

--

- I will use Zoom Breakup Rooms for specific problems that need a closer look
    - e.g., when you need to share your screen with me
    - while the others continue working on their websites


--

- We need a system to indicate you are ready to move on
    - when asked, please indicate either way
        - just say, nod/shake your head, give thumbs up
        - I will also try Zoom Polls   

---
class: action

## The Workshop &mdash; Organisation &mdash; Slides

- Slides with this background colour indicate that your action is required, for
    - setting the workshop up
      - e.g., installing software
    
    - personalising the website
       - e.g., putting in your own contact details
    
    - completing the exercises
       - e.g., adding content to your website

---
class: action

## The Workshop &mdash; Organisation &mdash; Slides

- Slides with this background colour indicate that your action is required, for
    - setting the workshop up
      - e.g., installing software
    
    - personalising the website
       - e.g., putting in your own contact details
    
    - completing the exercises
       - e.g., adding content to your website
       
- Some of these slides have countdown timers
    - for guidance only

`r countdown(minutes = 1, seconds = 00, top = 0)`

---
## The Workshop &mdash; Organisation &mdash; Slides

- Codes and texts that go in (R) Markdown documents .inline-c[appear as such &mdash; in a different font, on gray background]
    - long codes and texts will have their own line(s)

--

- Results that come out in output files .out-t[appear as such &mdash; in the same font, on green background]
    - except very obvious results, such as figures and tables

--
 
- Specific sections are .yellow-h[highlighted yellow as such] for emphasis
    - these could be for anything &mdash; codes and texts in input, results in output, and/or texts on slides

--

- Names for items such as files, folders, variables are in `typefont`.
    - typefont with a trailing slash indicates a directory, known also as folder
        - e.g., `content/` is a directory

---
## The Workshop &mdash; Aims

- To leave you with a website
    
  - working, continuously deployed from RStudio
  - albeit minimal

--

- To make you aware what else is possible

  - so that you can update your website after the workshop
  - awareness of what is possible, `Google`, and perseverance are all you need

---
## The Workshop &mdash; Contents

.pull-left[

**Part 1. Getting the Tools Ready**
   - e.g., installing software

**Part 2. Website Front End**
   - e.g., the look in a browser

**Part 3. Website Back End**
   - e.g., the look in RStudio

**Part 4. Configuration**
   - e.g., overall organisation and settings
   
**Part 5. Managing Content**
   - e.g., adding pages and sections

]

--

.pull-right[


   
**Part 6. Version Control**
   - e.g., integrating Git and GitHub  

**Part 7. Deployment**
   - e.g., integrating Netlify

**Part 8. Adding Text-Based Content**
   - e.g., plain Markdown syntax
   - includes time for individual work
   
**Part 9. Adding Data-Based Content**
   - e.g., R Markdown syntax
   - includes time for individual work

]

---
class: inverse, center, middle

# Part 1. Getting the Tools Ready

---
class: action

## Git &mdash; Download from the Internet and Install

- We need Git to version control our websites
    - and to deploy them continuously

--

- For Windows, install 'Git for Windows', downloading from [https://gitforwindows.org](https://gitforwindows.org/)
       - select 'Git from the command line and also from 3<sup>rd</sup>-party software'
       
- For Mac, install 'Git', downloading from [https://git-scm.com/downloads](https://git-scm.com/downloads)

---
class: action

## GitHub &mdash; Open an Account

- We need a GitHub account to keep a copy of website on the cloud
   - and to version control it, to deploy it continuously

--

- Sign up for GitHub at [https://github.com](https://github.com/)

   - registering an account is free

   - usernames are public
      - either choose an anonymous username (e.g., `asdf029348`)
      - or choose one carefully &mdash; it becomes a part of users online presence
      
   - usernames can be changed later

---
class: action

## Netlify &mdash; Open an Account

- We need a Netlify account to deploy our websites

--

- Sign up for Netlify at [https://www.netlify.com/](https://www.netlify.com/)

   - registering an account is free

   - you can use your GitHub account to register
        
---
class: action

## R and RStudio &mdash; Download from the Internet and Install

- Download R from [https://cloud.r-project.org](https://cloud.r-project.org)
    - choose the version for your operating system

- Download RStudio from [https://rstudio.com/products/rstudio/download](https://rstudio.com/products/rstudio/download)
    - choose the free version

---
class: action

## R Packages &mdash; Install from within RStudio

Install the following R packages, using the code below

```{r eval=FALSE, tidy=FALSE}
install.packages(c("blogdown", "dplyr", "ggplot2", "stargazer"))
```

- `blogdown` (Xie, 2020d), for creating websites

- `dplyr` (Wickham, 2020a), for data manipulation
    - alternatives: e.g., `base`, `data.table` (Dowle & Srinivasan, 2019)
    
- `stargazer` (Hlavac, 2018), for tables
    - alternatives: e.g., `knitr` (Xie, 2020b), `kableExtra` (Zhu, 2019)
    
- `ggplot2` (Wickham, 2020b), for figures
    - alternatives: e.g., `base`, `plotly` (Sievert et al., 2020)

---
## `blogdown` &mdash; Overview

- A relatively small R package, to facilitate creating websites
    - enables a seamless workflow, all within RStudio 
    - does not build websites itself

--

- Builds upon other software
    - most importantly `Hugo` for generating sites
    - (R) Markdown for text formatting
    - `pandoc` for transforming Markdown files into HTML
    - `TOML` and `YAML` syntaxes for configuration and front matter

--

- Has a confusing name
    - it is not necessarily about blogs, but general-purpose websites

--

- Comes with a book
   - *blogdown: Creating Websites with R Markdown* (Xie et al., 2018)
       - open access at [https://bookdown.org/yihui/rmarkdown](https://bookdown.org/yihui/rmarkdown/)
       - also has a confusing name, as R Markdown is not central to creating websites

---
## `blogdown` &mdash; Addins

.pull-left-c[

- Observe that, since you've installed `blogdown`, RStudio includes six new addins
    - e.g., `Serve Site`
    - mouse over in RStudio to read their definitions

- Each addin has a corresponding function
    - e.g., `blogdown::serve_site()`<sup>*</sup> 
   
]

.pull-right-c[

![](rbd_workshop_files/images_data/addins.png)

]

.footnote[

[*] Not all `blogdown` functions are exported. In practice, this means we would need to call `blogdown:::` (with the triple-colon operator) for some functions, such `blogdown:::touch_file()`.

]

---
## `blogdown` &mdash; Important Fuctions

- `blogdown` provides functions to facilitate interacting with `Hugo` from within R, including
    - `blogdown::install_hugo()`
    - `blogdown::serve_site()`
    - `blogdown::build_site()`

- It is customary to call `blogdown` functions with the double colon operator .yellow-h[::]
   - the usual way would also work
      - i.e., load `library(blogdown)` first

- To see the list of exported functions, type `blogdown::` in the `Console`
    - hit the `tab` key if necessary

---
class: action

## Hugo &mdash; Install from within RStudio

Install Hugo, with the following code

```{r eval=FALSE, tidy=FALSE}
blogdown::install_hugo()
```

- `Hugo` is a *static* website generator
    - static websites are a collection of pages
    - pages display the same information to all visitors
    
- It comes with 
    - a detailed documentation, available at <https://gohugo.io/documentation/>
    - 300+ themes, available at <https://themes.gohugo.io/>
        - we will be working with the `Academic` theme
        
---
## Other Resources &mdash; For Later
 
- R Markdown: The Definitive Guide (Xie et al., 2019)

   - open access at [https://bookdown.org/yihui/rmarkdown](https://bookdown.org/yihui/rmarkdown/)

- R Markdown Cheat Sheet

   - follow from the RStudio menu

> `Help -> Cheatsheets -> R Markdown Cheat Sheet` 

- Pandoc User's Guide

   - available at [https://pandoc.org/MANUAL.html](https://pandoc.org/MANUAL.html)

- R for Data Science (Wickham and Grolemund, 2019)
  
   - open access at [https://r4ds.had.co.nz](https://r4ds.had.co.nz/)
   
---
class: inverse, center, middle

# Part 2. Website Frontend

---
## `Academic` &mdash; Overview

.pull-left-c[

- A theme designed by [George Cushen](https://georgecushen.com/)

    - demonstration website is live at <https://themes.gohugo.io/theme/academic/>
    
    - documentaion is available at <https://sourcethemes.com/academic/docs/>  
    
]

.pull-right-c[

![](rbd_workshop_files/images_data/academic_demo.png)

]

---
class: action

## `Academic` &mdash; Demonstration Site

- Visit [https://themes.gohugo.io//theme/academic/](https://themes.gohugo.io//theme/academic/), and explore the site

- Pay attention to
    - what is on the homepage
    - how the homepage compares to the `Courses` section
    - the behaviour when one clicks on `Posts` versus `Courses`

`r countdown(minutes = 3, seconds = 00, top = 0)`

---
## `Academic` &mdash; Demonstration Site

- The homepage is composed of different parts, called widgets
    - e.g., the sections titled `Academic`, `Demos`, `Biography` etc.

--

- Some menu items direct the screen to different widgets on the homepage
    - e.g., `Demo`, `Posts`, `Projects` etc.

--

- Other menu items direct to stand alone sections
    - e.g., `Courses`

--

- The menu also has a search function and a day/night mode switch
    
---
## `Academic` &mdash; Advantages

- Designed especially for academics in mind
    - features what academics would want to feature
        - e.g., education, publications

--

- Well looked after
    - last updated a few days ago
        - `Hugo` released v0.71.1 on Monday (25 May), which broke the theme
        - `Academic` got updated on Tuesday with a fix
    - has a lively community of users and developers behind it
    

--

- Well documented
    - every line of code in the example site is commented
    - more documentation available at [https://sourcethemes.com/academic/docs/](https://sourcethemes.com/academic/docs/)

---
## `Academic` &mdash; Disadvantages

- Complicated

  - with its high customisation, comes high complexity
  - its widgets can at first be overwhelming

--

- Popular

  - over 100,000 websites use this theme
  - hard to stand out in this crowd with the look
    
---
## `Academic` &mdash; Disadvantages

- Complicated **but well documented**
    - with its high customisation, comes high complexity
    - its widgets can at first be overwhelming
    - **you can handle it on your own**

- Popular **but with room for personalisation**
    - over 100,000 websites use this theme
    - hard to stand out in this crowd with the look
    - **it comes with different colour schemes, fonts** 
    - **there are many potential combinations of widgets**

---
class: inverse, center, middle

# Part 3. Website Backend

---
class: action

## Website Project &mdash; Create from within RStudio

.pull-left-c[

- Create a new R project, specifically for a website

> `File -> New Project -> New Directory -> Website using blogdown`

- Give your project a name with `Directory Name`

- Choose a location for the project with `Browse...`
    - synced locations, e.g., `Dropbox`, are likely to cause problems
        - pause syncing, or add an exclusion
        
]

.pull-right-c[

![](rbd_workshop_files/images_data/create_project1.png)

]
---
class: action

## Website Project &mdash; Create from within RStudio

.pull-left-c[

- Observe that the default theme is `yihui/hugo-lithium`
    - this has the format `GiTHubUserName/RepoName`
    - located at [https://github.com/yihui/hugo-lithium](https://github.com/yihui/hugo-lithium)

- Change the theme to `gcushen/hugo-academic`
    - this is the `Academic` theme
        
- Click `Create Project` to start

]

.pull-right-c[

![](rbd_workshop_files/images_data/create_project2.png)

]

---
## Website Project &mdash; Directory Structure

.pull-left-c[

Observe that the .yellow-h[root directory]<sup>*</sup> is now populated with website files

]

.pull-right-c[

![](rbd_workshop_files/images_data/root_directory.png)

]

.footnote[

[*] The root directory is the main directory of your website project. It is often referred with a single slash .yellow-h[/].

]

---
## Website Project &mdash; Directory Structure

.pull-left-c[

Observe that the root directory is now populated with website files
- .yellow-h[`config.toml`] and other configuration files under .yellow-h[`config/`]

    - sets global configurations
        - e.g., title, decription, navigation menu
    - uses the TOML syntax
        - learn more about it at [https://github.com/toml-lang/toml](https://github.com/toml-lang/toml)
]

.pull-right-c[

![](rbd_workshop_files/images_data/root_directory.png)

]

---
## Website Project &mdash; Directory Structure

.pull-left-c[

Observe that the root directory is now populated with website files
- `config.toml`, `config/*`
- .yellow-h[`content/`]

    - includes files to be transformed into HTML pages
    - each directory under `content/` is a section of a website
        - e.g., `content/post/` corresponds to `https://example.com/post/`
]

.pull-right-c[

![](rbd_workshop_files/images_data/content.png)

]

---
## Website Project &mdash; Directory Structure &mdash; `content/`

- Observe that the files under `content/` are typically Markdown files

    - with the `.md` extension

--

- These files have typically two sections

    - a "front matter" with TOML or YAML syntax
       - TOML goes between a pair of three plus signs +++
       - YAML goes between a pair of three hyphens ---
    - and some text
       - using Markdown syntax
    
--

- `Academic` uses

    - TOML front matter for widgets
      - these are under `home/`
    - YAML front matter for all other `.md` files
      - e.g., under `post/`

---
## Website Project &mdash; Directory Structure

.pull-left-c[

Observe that the root directory is now populated with website files
- `config.toml`, `config/*`
- `content/`
- .yellow-h[`static/`]

    - contains files that should appear on websites as is
        - e.g., images, PDF files
        - these can be orginised within seperate directories
            - e.g., images can be put in `static/img`
    - Hugo does not transform the files in this folder

]

.pull-right-c[

![](rbd_workshop_files/images_data/static.png)

]

---
## Website Project &mdash; Directory Structure &mdash; Notes

- Hugo websites follow a certain structure
    - see the Hugo documentation for directory structure at <https://gohugo.io/getting-started/directory-structure/>

- Directory structure might look slightly different in different themes
    - e.g., less complex themes have one configuration file only, without `config/`
    
- Other files and folders are equally important
    - e.g., `themes/` hold one or more themes
    - but you are less likely to work with them, at this stage
    
---
class: action

## Website Project &mdash; `Serve Site`

.pull-left-c[
- Click the `Addins -> Serve Site` to preview the site 
    - this is equivalent to typing `blogdown::serve_site()` in the `Console`
    
- Observe that the website is live in the `Viewer` tab
    - this can be viewed with a browser, by clicking on the window icon
            
]

.pull-right-c[

```{r, echo = FALSE, out.width = "100%"}
knitr::include_graphics("rbd_workshop_files/images_data/viewer.png")
```

]

---
## Website Project &mdash; `Serve Site` &mdash; View in Browser

```{r, echo = FALSE, out.width = "60%", fig.align="center"}
knitr::include_graphics("rbd_workshop_files/images_data/browser.png")
```

---
class: action

## Website Project &mdash; `Serve Site`

.pull-left-c[
- Click the `Addins -> Serve Site` to preview the site 
    - this is equivalent to typing `blogdown::serve_site()` in the `Console`
    
- Observe that the website is live in the `Viewer` tab
    - this can be viewed with a browser, by clicking on the window icon
    
- You can make live edits in this state
    - e.g., in `config.toml`, change <span style="background-color: #e5e5e5; border-radius: 3px; padding: 4px; font-family: 'Source Code Pro', 'Lucida Console', Monaco, monospace;">title = "Academic"</span>, and save
        - e.g., to <span style="background-color: #e5e5e5; border-radius: 3px; padding: 4px; font-family: 'Source Code Pro', 'Lucida Console', Monaco, monospace;">title = "YourName"</span>
        - observe the live change in the website
            
]

.pull-right-c[

```{r, echo = FALSE, out.width = "100%"}
knitr::include_graphics("rbd_workshop_files/images_data/viewer2.png")
```

]
---
## Website Project &mdash; Directory Structure &mdash; `public/`

.pull-left-c[

- Observe that the root directory now includes `public/`
    - since you served the site
    
- Websites are rendered into this directory
    - it includes everything web servers need
    
- It gets recreated every time a website is served or built
    - e.g., you can delete it before each build, which is actually recommended

]

.pull-right-c[

```{r, echo = FALSE, out.width = "100%"}
knitr::include_graphics("rbd_workshop_files/images_data/root_directory2.png")
```

]

---
class: inverse, center, middle

## Part 4. Configuration

---
## Configuration &mdash; Overview

- There are four main configuration files in the theme
    - `config.toml`
    - `config/_default/languages.toml`
    - `config/_default/menus.toml`
    - `config/_default/params.toml`

--

- We will work with the existing options of in these files
    - for the complete list options that one can use in configuration files, see <https://gohugo.io/getting-started/configuration>
    
--

- Use these files for definitions, settings, and overall organisation
   - this requires working with the TOML syntax

---
## Configuration &mdash; TOML Syntax

.pull-left[

- TOML uses `key = value` pairs

   - keys are pre-defined &mdash; mostly by Hugo, but also by each theme
       - e.g., `title`
   - users supply the values 
       - e.g., "Name Surname"

]

.pull-right[

```r
 title = "Resul Umit"
```

]
---
## Configuration &mdash; TOML Syntax

.pull-left[

- TOML uses `key = value` pairs
   - keys are pre-defined &mdash; mostly by Hugo, themes
       - e.g., `title`
   - users supply the values
       - e.g., "Name Surname"

- Values can take
    - <span style="background-color: #ffff88;">strings, in quotation marks</span>

]

.pull-right[

```r
 `title = "Resul Umit"`
```

]

---
## Configuration &mdash; TOML Syntax

.pull-left[

- TOML uses `key = value` pairs &mdash; mostly by Hugo, themes
   - keys are pre-defined
       - e.g., `title`
   - users supply the values
       - e.g., "Name Surname"

- Values can take
    - strings, in quotation marks
    - <span style="background-color: #ffff88;">numbers, bare</span>

]

.pull-right[

```r
 title = "Resul Umit"
 `summaryLength = 30`
```

]

---
## Configuration &mdash; TOML Syntax

.pull-left[

- TOML uses `key = value` pairs &mdash; mostly by Hugo, themes
   - keys are pre-defined
       - e.g., `title`
   - users supply the values
       - e.g., "Name Surname"

- Values can take
    - strings, in quotation marks
    - numbers, bare
    - <span style="background-color: #ffff88;">Boolean values, in lower case, bare</span>

]

.pull-right[

```r
 title = "Resul Umit"
 summaryLength = 30
 `enableEmoji = true`
```

]

---
## Configuration &mdash; TOML Syntax

.pull-left[

- TOML uses `key = value` pairs &mdash; mostly by Hugo, themes
   - keys are pre-defined
       - e.g., `title`
   - users supply the values
       - e.g., "Name Surname"

- Values can take
    - strings, in quotation marks
    - numbers, bare
    - Boolean values, in lower case, bare
    - <span style="background-color: #ffff88;">array of values</span>

]

.pull-right[

```r
 title = "Resul Umit"
 summaryLength = 30
 enableEmoji = true
 `office_hours = ["Monday 10:00 to 13:00", "Wednesday 09:00 to 10:00"]`
 
```

]

---
## Configuration &mdash; TOML Syntax

.pull-left[

- .yellow-h[Values in single square brackets] are tables

]

.pull-right[

```r
 title = "Resul Umit"
 summaryLength = 30
 enableEmoji = true
 office_hours = ["Monday 10:00 to 13:00", "Wednesday 09:00 to 10:00"]
 
 `[social]`
    `twitter = "https://twitter.com/resulumit"`
    `github  = "https://github.com/resulumit"`
```

]

---
## Configuration &mdash; TOML Syntax

.pull-left[

- Values in single square brackets are tables

- .yellow-h[Values in double square brackets] are arrays of tables
    - these create menu items

]

.pull-right[

```r
 title = "Resul Umit"
 summaryLength = 30
 enableEmoji = true
 office_hours = ["Monday 10:00 to 13:00", "Wednesday 09:00 to 10:00"]
 
 [social]
    twitter = "https://twitter.com/resulumit"
    github  = "https://github.com/resulumit"
    
 `[[menu]]`
    `name   = "Blog"`
    `url    = "blog/"`
    `weight = 2`
```

]

---
## Configuration &mdash; TOML Syntax &mdash; Notes

There is an alternative way to write tables

```r
social = { twitter = "https://twitter.com/resulumit", github  = "https://github.com/resulumit"  }
```

--

There is also an alternative way to write arrays of tables

```r 
menu = [ {name = "Home", url = "/", weight = 1},
         {name = "Blog", url = "blog/", weight = 2},
         {name = "Publications", url = "publications/", weight = 3},
         {name = "About", url = "about/", weight = 4} ]
```

---
## Configuration &mdash; TOML Syntax &mdash; Notes

Disable an option in TOML files, you can

- comment its line out with a hash

```r
# title = "Resul Umit"
```
--

- set it to `[]`

```r
title = []
```

--

- set it to ""

```r
title = ""
```

--

- ~~delete it altogether~~
    - not recommended as you might need that key in the future

---
class: action

## Configuration &mdash; `config.toml`

.pull-left[

- Notice that this file is in the root directory

- Change `title`

- Change `baseurl` only if you have a custom domain name
    - remember to keep the trailing slash
    
- Add `copyright` if you prefer to have a note 
    - `&copy;` is the HTML code for the copyright symbol <span style="background-color: #ffff88;">&copy;</span>
    - `{year}` yields the current year, so that you don't have to update this every year

- Scroll through the advanced settings

]

.pull-right[

```r
title = "Resul Umit"

...

baseurl = "https://resulumit.com/"

...

copyright = "Resul Umit &copy; 2013 -- {year}"

```

]

`r countdown(minutes = 4, seconds = 00, top = 0)`  

---
class: action

## Configuration &mdash; `params.toml`

- Notice that this and remaining configuration files are under `config/_default/`

- Define various parameters for your website
  - contact details are the part you should change
  - other sections are optional and/or can be left as they are

- Colour schemes and fonts are defined in this file
  - an important opportunity to personalise
  - see what is available at <https://sourcethemes.com/academic/themes/>
  
- Icons are available from various packages
  - see the list at <https://sourcethemes.com/academic/docs/page-builder/#icons>

`r countdown(minutes = 10, seconds = 00, top = 0)`  

---
## Configuration &mdash; `menus.toml`

- Use this file to organise the main menu
    - create and order menu items
    - direct them with links

--

- We will edit this file throughout the workshop
    - menu will change as we personalise the website and add content

---
## Configuration &mdash; `menus.toml`

.pull-left-c[

- Define menu items 
    - under separate <span style="background-color: #ffff88;">[[main]]</span>

]

.pull-right-c[

```r
[[main]]
  name = "Posts"
  
  

[[main]]
  name = "Courses"
  
  
  
[[main]]
  name = "Twitter"
  
  
  
[[main]]
  name = "CV"
  
  
```
]

---
## Configuration &mdash; `menus.toml`

.pull-left-c[

- Define menu items 
- Order the items
    - with the `weight` argument

]

.pull-right-c[

```r
[[main]]
  name = "Posts"
  `weight = 1`
  

[[main]]
  name = "Courses"
  `weight = 2`
  
  
[[main]]
  name = "Twitter"
  `weight = 3`
  
  
[[main]]
  name = "CV"
  `weight = 4`
  
  
```

]

---
## Configuration &mdash; `menus.toml`

.pull-left-c[

- Define menu items 
- Order the items
- Link them to destinations
    - with the `url` argument    
<br>
        - with a hash <span style="background-color: #ffff88;">#</span> to widgets
        - these are defined under `content/home/`   
<br>
       - with a trailing slash <span style="background-color: #ffff88;">/</span> to sections
       - these sections are defined under `content/`, in their own sub-directory  
<br>
       - with URLs to external sites
       - e.g., Twitter    
<br>
       - with paths relative to the `static/` sub-directory
       - `files/cv.pdf` suggests my cv is under `static/files/cv.pdf`
]   


.pull-right-c[

```r
[[main]]
  name = "Posts"
  weight = 1
  `url = "#posts"`

[[main]]
  name = "Courses"
  weight = 2
  `url = "courses/"`
  
[[main]]
  name = "Twitter"
  weight = 3
  `url = "https://twitter.com/resulumit"`
  
[[main]]
  name = "CV"
  weight = 4
  `url = "files/cv.pdf"`
 
```
]

---
class: action

## Configuration &mdash; `menus.toml` &mdash; Exercises

- Direct the menu item `Post` to the related content section
    - rather than the related widget
    
- Change the order of `Projects` and `Publications`
    - so that the former comes after the latter

- Comment out `Contact` to hide it  

`r countdown(minutes = 3, seconds = 00, top = 0)`  

---
## Configuration &mdash; `languages.toml`

Use this file 

- to define the language of the website
    - the default is English
    - see the list of languages and their codes at [https://sourcethemes.com/academic/docs/language/](https://sourcethemes.com/academic/docs/language/)
    - if you are to change `languageCode` in `languages.toml`, remember to change `defaultContentLanguage` in `config.toml` as well

--

- to make the site multi-lingual
    - we will not cover it in this workshop
    - instructions available at the above link as well
    
---
## Configuration &mdash; Multi-lingual Sites    

- Considerations
    - Who is your target audience?
        - would they be lost if your website was only in one language? If no, perhaps it is not worth the hassle
    - what will be in multiple languages?
        - all website, or some blogposts? Remember, even in a single language setting, blogposts can be in different languages.

--

- Strategy
    - build your website in full in one language, than add the second
        - rather then building it multiple languages in tandem
        - hence not covered in the workshop

---
class: inverse, center, middle

## Part 5. Managing Content

---
## Content &mdash; Overview

- Most website content goes into the `content/` directory
    - except those go in `static/`

--

- This content is saved in (R) Markdown files
    - each file has a front matter &mdash; TOML or YAML
    - and often some text &mdash; Markdown text

--

- Content is organised in sections 
    - sections can include only one or more pages
        - each page corresponding to a .md file

- Multi-page sections are organised in directories under `content/`
   - e.g. `content/post/`
   - .md files for single-page sections can alternatively be saved directly under `content/`
        - e.g., `content/about.md`
        
---
## Content &mdash; Directory Structure &mdash; Single-Page Sections

A single page section, created with a file directly under `content/`

```r
.
└── content/
    |
    └── privacy.md       # <- https://example.com/privacy/
        
```
---
## Content &mdash; Directory Structure &mdash; Single-Page Sections

A single page section, in its own directory under `content/`

```r
.
└── content/
    |
    └── privacy.md       # <- https://example.com/privacy/
    |
    └── `about/`
        └── `index.md`    # <- https://example.com/about/
        
```
---
## Content &mdash; Directory Structure &mdash; Single-Page Sections

Notice that `index.md` is a special file name, that `Hugo` treats them differently

```r
.
└── content/
    |
    └── privacy.md       # <- https://example.com/privacy/
    |
    └── `about/`
    |   └── `index.md`     # <- https://example.com/`about`/
    |
    └── `cv/`              # <- https://example.com/`cv`/
        └── `long-cv.md`   # <- https://example.com/`cv/long-cv`/
        
```

--
Notice that

- `https://example.com/about/` is a content page, showing `index.md`
- `https://example.com/cv/long-cv/` is a content page, showing `long-cv.md`
- `https://example.com/cv/` is an index page, showing a link to `https://example.com/cv/long-cv/`

---
## Content &mdash; Directory Structure &mdash; Index Pages

- Index pages are meaningful rather for multi-page sections
    - avoid creating index pages for single-page sections
    
--

- <span style="background-color: #ffff88;">&#95;</span>`index.md` is a special file because
    - they create sections under sections
       - e.g., `publications/journal_articles/_index.md` creates a section at `https://example.com/publications/journal_articles`
          - this can then have its own index page
          
    - they define variables for section index pages
        - e.g., index pages are by default titled as the plural of section names
            - e.g., `publication/` is titled as `Publications`
        - change this behaviour and others with `_index.md`

---
## Content &mdash; Directory Structure &mdash; Multi-Page Sections

Principles from single-page sections apply here as well

```r
.
└── content/
    |
    └── post/                # <- https://example.com/post/ # section page (default organisation)
        |
        ├── hello-world.md   # <- https://example.com/post/hello-word/
        |
        ├── new-job/
        |   |
        |   └── index.md     # <- https://example.com/post/new-job/
        |
        └── publications/                                   # no section page at https://example.com/post/publications/
            |
            └── ajps.md      # <- https://example.com/post/publications/ajps/
        
```

---
## Content &mdash; Directory Structure &mdash; Multi-Page Sections

Add `_index.md` to `post/` to organise its content

```r
.
└── content/
    |
    └── post/                  
        ├── `_index.md`       # <- https://example.com/post/   # section page (modified organisation)
        |
        ├── hello-world.md   # <- https://example.com/post/hello-word/
        |
        ├── new-job/
        |   |
        |   └── index.md     # <- https://example.com/post/new-job/
        |
        └── publications/                                     # no section page at https://example.com/post/publications/
            |
            └── ajps.md      # <- https://example.com/post/publications/ajps/
```    

---
## Content &mdash; Directory Structure &mdash; Multi-Page Sections

Add `_index.md` to `post/publications/` to create section and organise it

```r
.
└── content/
    |
    └── post/
        |
        ├── _index.md         # <- https://example.com/post/   # section page (modified organisation)
        |
        ├── hello-world.md    # <- https://example.com/post/hello-word/
        |
        ├── new-job/
        |   |
        |   └── index.md      # <- https://example.com/post/new-job/
        |
        └── publications/ 
            |
            ├── `_index.md`     # <- https://example.com/post/publications/   # section page (modified organisation)
            |
            └── ajps.md       # <- https://example.com/post/publications/ajps/
```   

---
class: action

## Content &mdash; Directory Structure &mdash; Example Site

- Explore the directory structure of the `Academic` example site
    - how many sections are there?
    - are there any subsections?
        - hint: look at `authors/` and `courses/` carefully

- Do a matching exercise
    - open the example site on a browser
    - try and find the front end of the following file
        - `content/publication/journal-article/index.md`
    - compare the back end with front end

`r countdown(minutes = 5, seconds = 00, top = 0)`

---
## Content &mdash; Example Site &mdash; Personalisation

- The example site has many sections and a few subsections
    - not all would be desirable for everyone to have 

--

- To facilitate coordination, we will first strip the site down to basics
    - keeping only the must-have sections
    - and personalising the information on these sections

--

- In Part 8 and 9, we will cover how to add new content
    - with time for individual work
    
---
## Content &mdash; Homepage &mdash; Overview

- The homepage in `Academic` is typically composed of several parts, called `widgets`
    - considered as one of the strengths of the theme
        - some websites have only this page

   - see `content/home/`
   
--

- A homepage can have none, one, or all widgets
    - widgets can be repeated for different purposes
        - e.g., the `pages` widget can summarise publications, courses, talks
    - they can be re-ordered as well

--

- Recall that menu items can direct to a specific widget on the homepage
    - e.g., as does `Contacts` in the demonstration site
    
---
## Content &mdash; Homapage &mdash; Widgets

- There are 13 types of pre-defined widgets
    - for detailed explanations, see [https://sourcethemes.com/academic/docs/page-builder/](https://sourcethemes.com/academic/docs/page-builder/)
    - you can build your own widget as well

--

- Widgets are in fact Markdown files, with .md extension
      - each has TOML syntax as the front matter
      - some has Markdown text as well
          - e.g., `demo.md`
      - because they can have both variables and text, TOML goes between a pair of three plus signs +

--

- The widgets are located under `content/home/` in the example site
    - except `index.md`, each file is a widget &mdash; some duplicates of the same type
  
  
---
## Content &mdash; Homapage &mdash; Widgets &mdash; Important Keys


.pull-left-c[

- Some keys are common across all widgets

    - <span style="background-color: #ffff88;">Indicate the type of the widget</span>
        - see all pre-defined types at <https://sourcethemes.com/academic/docs/page-builder/>

]


.pull-right-c[

```r
 `widget = "pages"`

```

]

---
## Content &mdash; Homapage &mdash; Widgets &mdash; Important Keys


.pull-left-c[

- Some keys are common across all widgets

    - Indicate the type of the widget
    - <span style="background-color: #ffff88;">(De-)Activate a widget</span>

]


.pull-right-c[

```r
 widget = "pages"
 `active = true`

```

]

---
## Content &mdash; Homapage &mdash; Widgets &mdash; Important Keys


.pull-left-c[

- Some keys are common across all widgets

    - Indicate the type of the widget
    - (De-)Activate a widget
    - <span style="background-color: #ffff88;">Order a widget in relation to other widgets</span>

]


.pull-right-c[

```r
 widget = "pages"
 active = true
 `weight = 9` 

```

]


---
## Content &mdash; Homapage &mdash; Widgets &mdash; Important Keys


.pull-left-c[

- Some keys are common across all widgets

    - Indicate the type of the widget
    - (De-)Activate a widget
    - Order a widget in relation to other widgets
    - <span style="background-color: #ffff88;">Title and/or subsitle it</span>

]


.pull-right-c[

```r
 widget = "pages"
 active = true
 weight = 9
 `title = "Recent Publications"`
 `subtitle = ""`

```

]

---
## Content &mdash; Homapage &mdash; Widgets &mdash; Important Keys

.pull-left-c[

- Some keys are common across all widgets

    - Indicate the type of the widget
    - (De-)Activate it
    - Order it in relation to other widgets
    - Title and/or subsitle it
    
- Some keys are widget specific

    - <span style="background-color: #ffff88;">Link it to a content page</span>

]


.pull-right-c[

```r
 widget = "pages"
 active = true
 weight = 9
 title = "Recent Publications"
 subtitle = ""
 `page_type = "publication"`

```

]

---
## Content &mdash; Homapage &mdash; Widgets &mdash; Important Keys

.pull-left-c[

- Some keys are common across all widgets

    - Indicate the type of the widget
    - (De-)Activate it
    - Order it in relation to other widgets
    - Title and/or subsitle it
    
- Some keys are widget specific

    - <span style="background-color: #ffff88;">Link it to a content page</span>

- Widgets in the example site come with many keys and detailed definitions
    - further documentation is available at <https://sourcethemes.com/academic/docs/page-builder/>

]


.pull-right-c[

```r
 widget = "pages"
 active = true
 weight = 9
 title = "Recent Publications"
 subtitle = ""
 `page_type = "publication"`

```

]

---
## Content &mdash; Homapage &mdash; Widgets &mdash; Further Notes

- At this stage of the workshop, we will build the homepage with two widgets only
    - `About` and `Contact`, because
       - these are the sections that all websites should have
       - beyond these, it is unlikely that we will all need the *same* widgets
       
--

- We will return back to personalising the homepage further with additional widgets
    - in Part 8 and 9

--

- The form in the `Contact` widget, which is optional, requires a third party service
    - see `home/contact.md`
    - at Netlify, 100 messages per month is free<sup>*</sup>
        - no additional setup needed (after deployment of the site to Netlify in Part 7)
    - at Formspree, this limit is 50
        - requires a simple registration at first contact

.footnote[

[*] I recommend using Netlify. The limit would be enough for most personal websites. If you do reach the limit, you can consider your options then.

]
---
class: action

## Content &mdash; Homapage &mdash; Widgets

- Deactivate all but `about.md` and `contact.md`
    - by setting `active = false` in the front matter in each widget file under `content/home/`
        - remember that `index.md` is not a widget
        - `people.md` and `slider.md` come already deactivated

- Check if the homepage looks and works as expected
    - do all the buttons behave as expected?

- Edit as necessary
    - `config/_default/menus.toml` for the menu items
    - `config/_default/params.toml` for contact details

`r countdown(minutes = 10, seconds = 00, top = 0)`

---
## Content &mdash; Authors &mdash; Overview

- The example site comes with two pre-defined author profiles    
<br>
    - these profiles are under `content/authors/`
    - with usernames `admin` and `吳恩達`
        - note that each has its own directory

--

- The profiles are defined in `_index.md` files   
<br>
    - these are Markdown files
        - start<sup>*</sup> with YAML syntax for variables
            - has the same function with TOML syntax in configuration files
            - YAML documentation is available at [https://yaml.org/spec/1.2/spec.html](https://yaml.org/spec/1.2/spec.html)
        - after YAML, documents continue with Markdown syntax for text

.footnote[

[*] Technically, we can place YAML anywhere in a markdown document. However, it is a good practice to start with YAML.

]

---
## Content &mdash; Authors &mdash; YAML Syntax

.pull-left[

- YAML uses `key: value` pairs
   - notice the difference with TOML, using `key = value` pairs
   - keys are pre-defined
       - e.g., `title`
   - users define their own values 
       - e.g., "Name Surname"

- YAML is written between a pair of three hyphens
    - to distinguish it from the text that may follow

]

.pull-right[

```r
 ---
 title: About Me
 ---
 
 Resul Umit is a post-doctoral researcher at the University of Lucerne.
```

]

---
## Content &mdash; Authors &mdash; YAML Syntax

.pull-left[

Values can take
- <span style="background-color: #ffff88;">strings</span>

]

.pull-right[

```r
 ---
 `title: About Me`
 ---
```

]

---
## Content &mdash; Authors &mdash; YAML Syntax

.pull-left[

Values can take
- strings
   - <span style="background-color: #ffff88;">strings with special characters</span>, such as colons, require quotation marks


]

.pull-right[

```r
 ---
 title: About Me
 `role: "University of Lucerne: Post-doctoral Researcher"`
 ---
```

]

---
## Content &mdash; Authors &mdash; YAML Syntax

.pull-left[

Values can take
- strings
   - strings with special characters, such as colons, require quotation marks
- <span style="background-color: #ffff88;">numbers</span>, bare

]

.pull-right[

```r
 ---
 title: About Me
 role: "University of Lucerne: Post-doctoral Researcher"
 `year: 2020`
 ---
```

]

---
## Content &mdash; Authors &mdash; YAML Syntax

.pull-left[

Values can take
- strings
   - strings with special characters, such as colons, require quotation marks
- numbers, bare
- <span style="background-color: #ffff88;">Boolean values</span>, in lower case, bare

]

.pull-right[

```r
 ---
 title: About Me
 role: "University of Lucerne: Post-doctoral Researcher"
 year: 2020
 `superuser: true`
 ---
```

]

---
## Content &mdash; Authors &mdash; YAML Syntax

.pull-left[

Values can take
- strings
   - strings with special characters, such as colons, require quotation marks
- numbers, bare
- Boolean values, in lower case, bare
- <span style="background-color: #ffff88;">sequence of values</span> with a hyphen

]

.pull-right[

```r
 ---
 title: About Me
 role: "University of Lucerne: Post-doctoral Researcher"
 year: 2020
 superuser: true
 `interests:`
 `- Representation`
 `- Elections`
 `- Parliaments`
 ---
```

]

---
## Content &mdash; Authors &mdash; YAML Syntax &mdash; Notes

Multiple nesting of keys and sequences is also possible
- requires indentation with four spaces

```r
 ---
 education:
     courses:
     - course: PhD in Political Science
       institution: University of Vienna
       year: 2017
     - course: MSSc in European Studies
       institution: University of Tampere
       year: 2009
 ---
```

---
## Content &mdash; Authors &mdash; YAML Syntax &mdash; Notes

- Disable a key by 
    - commenting it out with a hash
    - setting it to empty string with "" or []
        - [] may not work in nests
    - ~~deleting it altogether~~
        - you may need that key in the future

--

- Deactivate an author by 
    - adding `draft: true` to the YAML of its `_index.md`
    - or, deleting the related directory
        - here deleting is fine, assuming a personal website
            - e.g., delete the second author `吳恩達`

--

- The related documentation is available at <https://sourcethemes.com/academic/docs/get-started/#introduce-yourself>

---
class: action

# Content &mdash; Authors

- Delete the subdirectory for the second author (`吳恩達`) profile 

- Under `admin/`
    - personalise `_index.md`
    - replace `avatar.jpg` with your profile picture
        - still call it `avatar.jpg`

- Optional
    - add a button for CV to the `About` widget, with the following code, assuming that
        - your CV document is called `cv.pdf`
        - and, it is under `static/files/`

```r
- icon: cv
  icon_pack: ai
  link: "files/cv.pdf"
```

`r countdown(minutes = 10, seconds = 00, top = 0)`  

---
class: action

## Content &mdash; Authors &mdash; Username

- You may wish to change the default username
    - from `admin` to something more personal
        - e.g., `yourname-surname`

--

- To do so
    - rename `admin/` to `yourname-surname/`
    - update any references to this directory, including
        - the front matter in `content/home/about.md`
        
---
## Content &mdash; Other Sections in Example Site

- We have so far worked with `home/` and `authors/`
    - but there are many other content sections, subsections, and pages
    
--

- As with widgets, we will strip the example site to bare minimum  at this stage of the workshop
    - we will return to adding content later on

--

- You can remove a content section by
    - deleting the related files or directories under `content/`
        - perhaps, you are sure you don't want a section for, say, talks?
    - or, adding `draft: true` to the YAML of a file
        - perhaps, you think you may need a section in the future

---
## Content &mdash; Other Sections in Example Site &mdash; `draft: true`

- Draft pages and therefore sections are still visible to you in live preview
    - e.g., when you use `blogdown::serve_site`
    - but not to the visitors of your website
        - e.g., when you use `blogdown::build_site`

- Adding `draft: true` to `_index.md` is enough to disable the whole section
    - some sections already has this file
        - e.g., `courses/`
    - others don't
        - e.g., `courses/`
        - you can add one, following

> `File -> New File -> R Script`

--

- If a section has several pages of the same sort, you can use a combination of deleting and adding `draft: true`
    - e.g., `publications/` has three examples articles
        - you may wish to keep only one

---
class: action

## Content &mdash; Other Sections in Example Site &mdash; `draft: true`

- Remove or deactivate all but `home/` and `authors/`
   - delete
   - turn into draft
   - or, use both strategies

`r countdown(minutes = 10, seconds = 00, bottom = 0, left = 0)`

---
class: inverse, center, middle

# Part 6. Version Control

---
## Version Control &mdash; Overview

- Projects based on code typically have many versions
    - especially true for website projects, edited over time

--

- With many versions created over time, possibly on different computers, there emerges at least two challenges
   - keeping track of changes and versions
   - communicating these changes between computers

--

- We all version control, in different ways, such as
   - edit, rename, save
   - use applications or websites such as Dropbox, Google Docs, Overleaf
   - use distributed version control systems such as Git and GitHub

--

- Version controlling with Git and GitHub has a extra benefit for website projects
   - i.e., allowing for continuous deployment

---
## Version Control &mdash; Git and GitHub &mdash; Definitions

- Git
    - a software that keeps track of versions of a set of files
    - it is local, the records are kept on your computer

--

- GitHub
    - a hosting service, or a website, that can keep the records
    - it is like Dropbox, but specifically structured to keep records with Git

--

- Repository, or repo
    - a set of files whose records are kept together, by Git and/or on GitHub
    - it is like a folder, which can keep files and other folders containing files

---
## Version Control &mdash; Git and GitHub &mdash; Definitions

- To commit
    - to take a snapshot of, to version a repository
    - it is like saving a new version of all changed files in your folder with a new name
    - it is local, the records are kept on your computer unless you `push`

--

- To push
    - to move the records from Git to GitHub, from your computer to online
    - it is like uploading (the new versions of) your files to a website, 
    - it also involves merging, if this not the first push

--

- To pull
    - to move the updated records from GitHub to your computer
    - it is like downloading a zipped folder of files, and merging with the ones on your computer

---
## Version Control &mdash; Git and GitHub

Version control with Git and GitHub requires

1. .yellow-h[initial setup], done once<sup>*</sup>
    - unless for a new computer or, if ever, a new GitHub account
    - a bit technical, but worth the hassle
    
2. .yellow-h[project setup], repeated for every paper
    - shorter, less complicated

.footnote[

[*] We have started this process already, in Part 1 of the workshop, by downloading and installing Git and signing up for GitHub.

]
---
class: action

## Version Control &mdash; Git &mdash; Inital Setup

1) Enable version control with RStudio

- from the RStudio menu, follow:

> `Tools -> Global Options -> Git/SNV -> Enable version control interface for RStudio projects`

- RStudio will likely find Git automatically. In case it cannot, Git is likely to be at

    - `c:/Program Files/Git/bin/git.exe` on Windows

    - `/usr/local/git/bin/git` on Mac

- observe that now there is a Git tab in RStudio
    - documents the differences between you local repository and the one on GitHub
    - when you change a file, it will appear here

---
class: action

## Version Control &mdash; Git &mdash; Inital Setup


2) Set Git Bash as your shell (Windows-only step)

- from the RStudio menu, follow:

> `Tools -> Global Options -> Terminal -> New terminals open with: Git Bash`

---
class: action

## Version Control &mdash; Git &mdash; Inital Setup

3) Introduce yourself to Git

- from the RStudio menu, follow:

> `Tools -> Terminal -> New Terminal`

- Enter the following lines in the Terminal, with the email address that you have used to sign up for GitHub

```yaml
git config --global user.name "YOUR NAME" 
git config --global user.email "YOUR EMAIL ADDRESS"
git config --global --list

```

---
class: action

## Version Control &mdash; Git and Github &mdash; Project Setup

1) Initiate local version control with Git

- from the RStudio menu, follow:

> `Tools -> Version Control -> Project Setup... -> Version Control System -> Git`

- observe that the project directory now includes a `.gitignore` file
    - this is where you can list files and/or folders to be excluded from being tracked

---
## Version Control &mdash; Git and Github &mdash; Project Setup &mdash; `.gitignore`

- `.gitignore` specifies which file(s) and/or folder(s) should be excluded from version control

    - a set of files and directories are ignored by default &mdash; see your `.gitignore` file

--

- There might be good reasons to ignore some files, including files

    - that contain information that we do not want others to see
        - e.g., personal API keys    
<br>
    - that we do not have the right to share with others
        - e.g., secondary data with user agreements otherwise    
<br>
    - that get re-created automatically
        - e.g., `public/` is built by Netlify during deployment
        
--

- See the documentation at <https://git-scm.com/docs/gitignore> for further details

---
class: action

## Version Control &mdash; Git and Github &mdash; Project Setup &mdash; `.gitignore`

- Add `public/` to `.gitignore`

```r
# files ignored by default
.Rproj.user
.Rhistory
.RData
.Ruserdata

# add the public directory

/public/

```

`r countdown(minutes = 1, seconds = 00, bottom = 0, left = 0)`

---
class: action

## Version Control &mdash; Git and Github &mdash; Project Setup

2) Create a new GitHub repository

- on GitHub, follow:

> `Repositories -> New -> Repository name (e.g., "my_website") -> Public -> Create repository`

- observe that

    - repository URLs have the following structure: https://github.com/USER_NAME/REPOSITORY_NAME
    
        - this is the address to view the repository online
        - for use in the `Terminal`, the address gets the `.git` extension
            - e.g., https://github.com/USER_NAME/REPOSITORY_NAME.git

---
class: action

## Version Control &mdash; Git and Github &mdash; Project Setup

3) Push an existing repository

- from the RStudio menu, follow:

> `Tools -> Terminal -> New Terminal`

- enter the following lines in the `Terminal`, with your username and repository name

```yaml
git remote add origin https://github.com/USER_NAME/REPOSITORY_NAME.git
git add .
git commit -m "initial commit"
git push -u origin master

```
- observe that your files are now at your GitHub repository
    - visit `https://github.com/USER_NAME/REPOSITORY_NAME`

- restart R by following from the RStudio menu:

> `Session -> Restart R`

---
class: action

## Version Control &mdash; Git and Github &mdash; Workflow

1) Edit and save a under version control
- e.g., delete the first sentence in a content section file that you are keeping

--
<br>

2) Commit and Push
- under the Git tab on RStudio, find the list of files edited
    - these will have `M`, for modified, as `Status`    
<br>
- tick `Staged`<sup>*</sup>  for one or more files that you would like to commit
   - enter a `Commit message` that summarises the edits
   - click `Commit` to create a record of the new version locally to your computer
   - click `Close -> Push` to push the version to GitHub

.footnote[
[*] To stage is to add files to be committed. It  allows us to commit one or more files together or separately.
]

---
## Version Control &mdash; Git and Github &mdash; Workflow &mdash; Revert

- Avoid pushing your project to GitHub without checking it works locally first
    - use `blogdown::serve_site()` for your advantage
    
--

- If things go wrong, you can revert back to the version on GitHub
    - `git checkout HEAD PATH/TO/FOLDER/OR/FILE` reverts a specific folder or file
    - `git reset --hard` reverts all
    
--

- Note that
    - reverting as above gets rid of good as well as bad edits
        - more nuanced approaches are possible
    - reverting further back to one of the previous versions also possible
    
---
class: action

## Version Control &mdash; Git and Github &mdash; Workflow &mdash; Revert

- Delete `themes/`
    - observe that your site does not build any more
        - and that there are changes listed in the `Git` tab

- Revert to the version on GitHub
   - hint:
       - use `git checkout HEAD themes/` or `git reset --hard`
   - observe that there now no changes listed in the `Git` tab

`r countdown(minutes = 2, seconds = 00, top = 0)`

---
class: inverse, center, middle

# Part 7. Deployment

---
## Deployment &mdash; Overview

- Deployment of your website onto a web server makes it visitable online
    - your website is currently available on your computer only

--

- You can deploy your website at any web server
    - [Netlify](https://www.netlify.com/) is a popular choice
        - well integrated with GitHub
        - easy to set up
        - includes a free plan
            - from the directory to Netlify    
<br>
   - recommended by many
       - including the authors of `blogdown` and `Academic`
        
---
## Deployment &mdash; Types

- There are two types of deployment
    - manual deployment, which involves
        - deleting the old `public/`, just in case
        - running the `blogdown::build_site()` function to create a brand new `public/`
        - drag and drop of the resulting new `public/` by hand
            - from the directory to Netlify    
<br>
    - automatic deployment, which involves
        - simply a push to GitHub

---
class: action

## Deployment &mdash; Manual

- Delete `public/`, if it exists
    - especially important if you have draft pages

- Type `blogdown::build_site()` in the the `Console`
    - observe that, unlike `blogdown::serve_site()`, this function does not output to `Viewer`
    - it also does not publish draft pages into `public/`

--

- Login to your Netlify account
    - at <https://www.netlify.com/>

--

- Drag and drop the `public/` folder from the root directory to `Netlify`
    - your website will be published within a minute
        - with a random component before `.netlify.app`
        - click on the link to observe
        
--

- You may wish to delete this site as we will deploy continuously
    - follow `Site Settings -> Delete Site`

---
## Deployment &mdash; Continuous

Continuous deployment 

- avoids repeating the above steps by hand
    - anything that can be automated, should be automated

--

- avoids potential mistake in the manual process
    - e.g., deploying `public/` generated by `blogdown::serve_site()` instead of `blogdown::build_site()`
        - which disregards draft pages, release dates

--

- requires an initial setup
    - done once per website
    
---
class: action

## Deployment &mdash; Continuous &mdash; Initial Setup

.pull-left-c[

1) Create a two-line file

```r
[context.production.environment]
HUGO_VERSION = "0.70.0"
```

- save it as `netlify.toml` to the root directory

- commit and push

]

.pull-right-c[

![](rbd_workshop_files/images_data/static.png)

]

---
class: action

## Deployment &mdash; Continuous &mdash; Initial Setup


2) On Netlify, follow

> `New site from Git -> GitHub -> Autorizing Netlify by Netlify -> Install`

- once installed, pick your repository, and click `Deploy site`
    - keep `Build command` as `Hugo`, `Publish directory` as `public`


3) On Netlify, click on `Domain management`

- if you don't have a custom domain name, click on `Options` to change the random address to something more meaningful
    - e.g., yournamesurname.netlify.app
    
- if you have a custom domain name, click on `Add custom domain` and follow the instructions

---
class: inverse, center, middle

# Part 8. Adding Text-Based Content

---
## New Content &mdash; Overview

- Adding as-is content (e.g., a PDF document) to `static/` is rather straightforward
    - no different than adding files to any other folder on your computer

--

- Here we focus on adding files to `content/`
    - these get transformed in the building process
        - from Markdown to HTML
    
--

- This process has 3 &ndash; 4 steps
    - add a new Markdown file to `content/`
        - in line with the directory structure in `Hugo`
    - define the front matter in YAML syntax
    - add text in Markdown syntax
    - if this is an R Markdown file, build the site 

--

- This part is about adding text-based content
    - these should work with both `.md` and `.Rmd` files
    - Part 9 is about adding data-based content
        - this works only with `.Rmd` files
        
---
## New Content &mdash; Markdown

- Markdown is a plain-text formatting syntax
    - the third syntax we are working with
        - in addition to TOML and YAML
    - much easier to write than HTML
        - versatile, can be transformed into many different formats, including HTML
   
- Most files in the example site are *plain* Markdown files
    - with the `.md` extension
    - transformed by `Blackfriday` &mdash; `Hugo`'s Markdown rendering engine, so is Netlify's
        - no need to build site locally for `.md` documents before pushing to GitHub
    - cannot execute any R code
--

- R Markdown documents can execute R code
    - with either `.Rmd` or `.Rmarkdown` extension
        - minimal differences between the two
        - but `blogdown` recommends the `.Rmarkdown` extension
    -transformed by `pandoc` &mdash; `blogdown`'s rendering engine
        - therefore requires building the site locally before pushing

---
## New Content &mdash; Adding New Page &mdash; Manually from Blank

One can add a new page in various ways, including starting with blank files

- Use the RStudio buttons to start fresh from a blank script
  - follow `File -> New File -> R Script`
  - fill in YAML information
  - add text
  - save with an appropriate name and extension to an appropriate location under `content/`
    - e.g., choose between `.md` and `.Rmd`
--

- Notice that this is not an efficient way

---
## New Content &mdash; Adding New Page &mdash; Manually from Existing Files

A more efficient way involves making use of existing files

- Use an existing file as a template
    - e.g., a file from the example site, which we have turned into draft
        - set <span style="background-color: #e5e5e5; border-radius: 3px; padding: 4px; font-family: 'Source Code Pro', 'Lucida Console', Monaco, monospace;">draft: false</span>, and change all that needs to change, including
            - file and folder names
            - YAML metadata
            - text
    - or, one can duplicate an existing even if active file, and follow the same steps as above
    
--

- Notice that RStudio offers convenient buttons under the `Files` tab, including

> `Files -> Rename`
        
> `Files -> More -> Copy`

---
## New Content &mdash; Adding New Page &mdash; `New Post`

.pull-left-c[

- `blogdown` offers a very convenient alternative with the `New Post` addin
    - follow from the `Addin` from within RStudio
    - this is equilevant to typing `blogdown::new_post()` in the `Console`
        - but this requires typing in the arguments

- This addin facilitates creating a new page with appropriate
    - location
    - YAML metadata
    - filename and extension

]

.pull-right-c[


![](rbd_workshop_files/images_data/new_post.png)

]

---
## New Content &mdash; Adding New Page &mdash; `New Post`

.pull-left-c[

Note that

- Depending on the `Archetype`, the addin populates documents with different YAML keys
   - e.g., includes `url_pdf` for `publication/`, but not for `post/`
        
]

.pull-right-c[


![](rbd_workshop_files/images_data/new_post.png)

]

---
## New Content &mdash; Adding New Page &mdash; `New Post`

.pull-left-c[

Note that

- Depending on the `Archetype`, the addin populates documents with different YAML keys
   - e.g., includes `url_pdf` for `publication/`, but not for `post/`
   
- The addin populates `author` in YAML while `Academic` uses `authors` (notice the plural s) key
   - fill in the right key in the resulting document instead
        
]

.pull-right-c[


![](rbd_workshop_files/images_data/new_post.png)

]

---
## New Content &mdash; YAML MetaData &mdash; Overview

- Recall that 

    - we use YAML to set the metadata of pages
        - e.g., title, author

    - YAML is written between a pair of three hyphens    
    
    - and, it is based on <span style="background-color: #e5e5e5; border-radius: 3px; padding: 4px; font-family: 'Source Code Pro', 'Lucida Console', Monaco, monospace;">key: value</span> pairs
       - all keys are pre-defined, some keys are optional
       - we supply the values
    

---
## New Content &mdash; YAML MetaData &mdash; Important Keys

- `draft`
    - set this key to `true` for draft pages 
        - remember that after `blogdown::serve_site()`, draft pages will be visible to you

--

- `publishdate`
    - set this key to a future date for pages to be published in the future
    - these pages will nevertheless be visible after `blogdown::serve_site()` to you

--

- `slug`
    - this key defines the tail of the URLs
    - by default, it is the file name
    - e.g., `post/new-job.md` with a <span style="background-color: #e5e5e5; border-radius: 3px; padding: 4px; font-family: 'Source Code Pro', 'Lucida Console', Monaco, monospace;">slug: index</span> would behave as if it is `post/index.md`

---
## New Content &mdash; Markdown Syntax &mdash; Overview

- The syntax depends on the type of Markdown

  - but the differences are minimal
    
--

- Plain Markdown (`.md`) follows `Blackfriday`'s Markdown syntax

  - a useful guide to the basic MArkdown syntax is available at <https://www.markdownguide.org/basic-syntax/>
  - a small number of `Blackfriday`-specific extensions are available at <https://github.com/russross/blackfriday>

- R Markdown (`.Rmd` and `.Rmarkdown`) follows the syntax in Pandoc's Markdown 

   - for the complete rules of the syntax, see [Pandoc User's Guide](https://pandoc.org/MANUAL.html)
   - for a useful summary of the syntax, see the R Markdown Cheat Sheet

---
---
## New Content &mdash; Markdown Syntax &mdash; Strategy

There are a few strategies to deal with `.md` versus `.Rmd` dilemma

- use `.md` for pages with no data, `.Rmd` for pages with data
    - maximises the functionality from each
    - requires learning the differences
    
- use `.Rmd` for all pages
    - requires learning only one syntax
    - misses the additional functionality in `.md`
    - folders get cluttered with intermediate files

--

- The syntax in the following slides of this section will work with both types
    - unless otherwise stated
        - e.g., see tasks lists
    
---
## New Content &mdash; Markdown Syntax &mdash; Lines

Multiple spaces on a given line are reduced to one

```{r eval = FALSE}
This is a sentence followed by four spaces.    This is another sentence on the same line.

```

.out-t[This is a sentence followed by four spaces.    This is another sentence on the same line.]

<br>

Line endings with fewer than two spaces are ignored

```{r eval = FALSE}
This is a sentence followed by one space.
This is another sentence on a new line.
```

.out-t[This is a sentence followed by one space. This is another sentence on a new line.]

---
## New Content &mdash; Markdown Syntax &mdash; Hard Brakes

Two or more spaces at the end of lines introduce hard brakes, forcing a new line

```{r eval = FALSE}
This is a sentence followed by two spaces.  
This is another sentence on a new line.
```

.out-t[This is a sentence followed by two spaces.  
This is another sentence on a new line.]
 
---
## Syntax &mdash; Block Quotes

Lines starting with the grater-than sign .yellow-h[&#62;] introduce block quotes

```{r, eval=FALSE}
> In God, we trust. All others must bring data. 
>
> --- Anonymous 

```

.out-t[

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;In God, we trust. All others must bring data.    
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &mdash; Anonymous
]
---
## Syntax &mdash; Paragraphs

One or more<sup>*</sup> blank lines introduce a new paragraph

```{r eval = FALSE}

This is the first sentence of a paragraph as it is preceded by a blank line. This is the second 
sentence of that paragraph, which is followed by a blank line. 

This is the first sentence of a *new paragraph* as it is preceded by a blank line. This is the 
second sentence of that paragraph, which is followed by a blank line.

```

.out-t[

This is the first sentence of a paragraph as it is preceded by a blank line. This is the second 
sentence of that paragraph, which is followed by a blank line.

This is the first sentence of a *new paragraph* as it is preceded by a blank line. This is the 
second sentence of that paragraph, which is followed by a blank line.

]

.footnote[

[*] Multiple blank lines between paragraphs reduced to one

]

---
## Syntax &mdash; Comments

Text with the syntax .inline-c[<!--].inline-c[comments -->] is omitted from output

```md
<!-- This paragraph needs re-writing -->
This is the first sentence of a paragraph as it is preceded by a blank line. This is the second 
sentence of that paragraph, which is followed by a blank line. 

This is the first sentence of a new paragraph <!-- I've removed italics --> as it is preceded 
by a blank line. This is the second sentence of that paragraph, which is followed by a blank 
line. 

```

.out-t[

This is the first sentence of a paragraph as it is preceded by a blank line. This is the second 
sentence of that paragraph, which is followed by a blank line.

This is the first sentence of a new paragraph as it is preceded by a blank line. This is the 
second sentence of that paragraph, which is followed by a blank line.

]

---
## Syntax &mdash; Headers

The number sign .yellow-h[&#x23;] introduces headers; lower levels are created with additional signs &mdash; up to total five levels

.pull-left[

.inline-c[&#x23; Introduction] becomes

.out-t[

# Introduction

]

.inline-c[&#x23;&#x23; 1. Introduction] becomes

.out-t[

## 1. Introduction

]

]

.pull-right[

.inline-c[&#x23;&#x23;&#x23; 3.1 Introduction] becomes

.out-t[

### 3.1 Introduction

]

.inline-c[&#x23;&#x23;&#x23;&#x23; Introduction] becomes

.out-t[

#### Introduction

]

.inline-c[&#x23;&#x23;&#x23;&#x23;&#x23; Introduction] becomes

.out-t[

##### Introduction

]

]

---
## Syntax &mdash; Emphases 

A pair of single asterisk .yellow-h[&#42;] or underscores .yellow-h[&#95;] introduces italics

<span style="background-color: #e5e5e5; border-radius: 3px; padding: 4px; font-family: 'Source Code Pro', 'Lucida Console', Monaco, monospace;">&#42;italics&#42;</span> becomes .out-t[*italics*]    

<span style="background-color: #e5e5e5; border-radius: 3px; padding: 4px; font-family: 'Source Code Pro', 'Lucida Console', Monaco, monospace;">&#95;italics&#95;</span> becomes .out-t[*italics*] as well

<br>

A pair of double asterisk or underscores introduces bold  

<span style="background-color: #e5e5e5; border-radius: 3px; padding: 4px; font-family: 'Source Code Pro', 'Lucida Console', Monaco, monospace;">&#42;&#42;bold&#42;&#42;</span> becomes .out-t[**bold**]

<span style="background-color: #e5e5e5; border-radius: 3px; padding: 4px; font-family: 'Source Code Pro', 'Lucida Console', Monaco, monospace;">&#95;&#95;bold&#95;&#95;</span> becomes .out-t[**bold**] as well

<br>

These two rules can be combined

<span style="background-color: #e5e5e5; border-radius: 3px; padding: 4px; font-family: 'Source Code Pro', 'Lucida Console', Monaco, monospace;">&#42;&#42;&#95;bolditalics&#95;&#42;&#42;</span> becomes .out-t[**_boldsitalics_**]

<span style="background-color: #e5e5e5; border-radius: 3px; padding: 4px; font-family: 'Source Code Pro', 'Lucida Console', Monaco, monospace;">&#95;&#42;&#42;bolditalics&#42;&#42;&#95;</span> becomes .out-t[_**bolditalics**_]  as well

---
## Syntax &mdash; Strikethrough

A pair of double tildes .yellow-h[~] introduces strikethrough

<span style="background-color: #e5e5e5; border-radius: 3px; padding: 4px; font-family: 'Source Code Pro', 'Lucida Console', Monaco, monospace;">&#126;&#126;strikethrough&#126;&#126;</span> becomes .out-t[~~strikethrough~~]

<br>

Strikethrough can be combined with italics or bold

<span style="background-color: #e5e5e5; border-radius: 3px; padding: 4px; font-family: 'Source Code Pro', 'Lucida Console', Monaco, monospace;">&#42;&#42;&#126;&#126;strikebold&#126;&#126;&#42;&#42;</span> or <span style="background-color: #e5e5e5; border-radius: 3px; padding: 4px; font-family: 'Source Code Pro', 'Lucida Console', Monaco, monospace;">&#95;&#95;&#126;&#126;strikebold&#126;&#126;&#95;&#95;</span>, they both become .out-t[**~~strikebold~~**]

<span style="background-color: #e5e5e5; border-radius: 3px; padding: 4px; font-family: 'Source Code Pro', 'Lucida Console', Monaco, monospace;">&#126;&#126;&#42;&#42;strikebold&#42;&#42;&#126;&#126;</span> or <span style="background-color: #e5e5e5; border-radius: 3px; padding: 4px; font-family: 'Source Code Pro', 'Lucida Console', Monaco, monospace;">&#126;&#126;&#95;&#95;strikebold&#95;&#95;&#126;&#126;</span>, they both become .out-t[~~**strikebold**~~] as well

<br>

<span style="background-color: #e5e5e5; border-radius: 3px; padding: 4px; font-family: 'Source Code Pro', 'Lucida Console', Monaco, monospace;">&#42;&#126;&#126;strikeitalitcs&#126;&#126;&#42;</span> or <span style="background-color: #e5e5e5; border-radius: 3px; padding: 4px; font-family: 'Source Code Pro', 'Lucida Console', Monaco, monospace;">&#95;&#126;&#126;strikeitalitcs&#126;&#126;&#95;</span>, they both become .out-t[*~~strikeitalitcs~~*] 

<span style="background-color: #e5e5e5; border-radius: 3px; padding: 4px; font-family: 'Source Code Pro', 'Lucida Console', Monaco, monospace;">&#126;&#126;&#42;strikeitalitcs&#42;&#126;&#126;</span> or <span style="background-color: #e5e5e5; border-radius: 3px; padding: 4px; font-family: 'Source Code Pro', 'Lucida Console', Monaco, monospace;">&#126;&#126;&#95;strikeitalitcs&#95;&#126;&#126;</span>, they both become .out-t[*~~strikeitalitcs~~*] as well

---
## Syntax &mdash; Links &mdash; Internal<sup>*</sup>

You can link text to section headers in the same document

<span style="background-color: #e5e5e5; border-radius: 3px; padding: 4px; font-family: 'Source Code Pro', 'Lucida Console', Monaco, monospace;">&#91;Conclusion](#conclusion)</span> becomes .out-t[[Conclusion](#conclusion)], and a click takes the screen to that section

<br>

Multi-word headers need hyphenation

<span style="background-color: #e5e5e5; border-radius: 3px; padding: 4px; font-family: 'Source Code Pro', 'Lucida Console', Monaco, monospace;">&#91;Literature Review](#literature-review)</span> becomes .out-t[[Literature Review](#literature-review)], and it works only if the second part is hyphenated

.footnote[

[*] We will cover links to references, figures, and tables later on.

]

---
## Syntax &mdash; Links &mdash; External

You can link text to URLs

<span style="background-color: #e5e5e5; border-radius: 3px; padding: 4px; font-family: 'Source Code Pro', 'Lucida Console', Monaco, monospace;">&#91;click here](https	&#58;//resulumit.com/)</span> becomes .out-t[[click here](https://resulumit.com/)]

<span style="background-color: #e5e5e5; border-radius: 3px; padding: 4px; font-family: 'Source Code Pro', 'Lucida Console', Monaco, monospace;">&#60;https&#58;//resulumit.com></span> becomes .out-t[<https://resulumit.com>]

<span style="background-color: #e5e5e5; border-radius: 3px; padding: 4px; font-family: 'Source Code Pro', 'Lucida Console', Monaco, monospace;">&#91;https&#58;//resulumit.com](https&#58;//resulumit.com/)</span> becomes .out-t[[https://resulumit.com](https://resulumit.com/)] as well

--

<br>

You can also link text to email addresses

<span style="background-color: #e5e5e5; border-radius: 3px; padding: 4px; font-family: 'Source Code Pro', 'Lucida Console', Monaco, monospace;">&#91;email me](mailto&#58;resul.umit@unilu.ch)</span><sup>*</sup> becomes .out-t[[email me](mailto:resul.umit@unilu.ch)]

<span style="background-color: #e5e5e5; border-radius: 3px; padding: 4px; font-family: 'Source Code Pro', 'Lucida Console', Monaco, monospace;">&#60;resul.umit@unilu.ch&#62;</span> becomes .out-t[<resul.umit@unilu.ch>]

.footnote[

[*] Notice the prefix .yellow-h[mailto:] in the second part of the construct

]

---
## Syntax &mdash; Footnotes &mdash

An alternative is to use the .inline-c[[^identifier]] syntax, with identifiers defined elsewhere in the same document

```{r eval = FALSE}
Dr Doe holds a PhD in rock science.[^defence_date]

[^defence_date]: She defended her thesis in 2017.
```

.out-t[Dr Doe holds a PhD in rock science.<sup>1</sup>] 
   
<br>

.footnote[

.out-t[[1] She defended her thesis in 2017.]

]

--

Notice that 

- the caret sign comes .yellow-h[after] the left square bracket
- this syntax works in text, but not in YAML

---
## Syntax &mdash; Lists

Lines starting with asterisk .yellow-h[&#42;] as well as plus .yellow-h[&#43;] or minus .yellow-h[&#8722;] signs introduce lists

```{r eval=FALSE}
- books
- articles
- reports
```

.out-t[

- books
- articles
- reports

]

---
## Syntax &mdash; Lists &mdash; Nesting

Lists can be nested within each other, with indentation

```{r eval=FALSE}
+ books
+ articles
    - published
    - under review
        + revised and resubmitted
    - work in progress
```

.out-t[

+ books
+ articles
    - published
    - under review
        + revised and resubmitted
    - work in progress

]

---
## Syntax &mdash; Lists &mdash; Numbering

List items can be numbered

```{r eval=FALSE}
1. books
2. articles
    - published
    - under review
        + revised and resubmitted
    - work in progress
```

.out-t[

1. books
2. articles
    - published
    - under review
        + revised and resubmitted
    - work in progress

]

---
## Syntax &mdash; Lists &mdash; Numbering

List items can be numbered

```{r eval=FALSE}
1. books
2. articles
    - published
    - under review
        + revised and resubmitted
    - work in progress
```

.out-t[

1. books
2. articles
    - published
    - under review
        + revised and resubmitted
    - work in progress

]

---
## Syntax &mdash; Lists &mdash; Tasks Lists

Task lists can be created in Markdown, but not in R Markdown

```{r eval=FALSE}
- [x] books
- [ ] articles
    - [ ] published
    - [x] under review
        + [x] revised and resubmitted
    - [ ] work in progress
```



---
## Syntax &mdash; Dashes

Two hyphens grouped together introduce an en-dash

.inline-c[&#8208;&#8208;] becomes .out-t[&ndash;]

<br>

Three hyphens grouped together introduce an em-dash

.inline-c[&#8208;&#8208;&#8208;] becomes .out-t[&mdash;]

---
## Syntax &mdash; Highlithing

Highlight any piece of text, by putting it in between a pair of backticks <span style="background-color: #ffff88; border-radius: 3px; padding: 4px; font-family: 'Source Code Pro', 'Lucida Console', Monaco, monospace;"><code>&grave;</code></span>


<span style="background-color: #e5e5e5; border-radius: 3px; padding: 4px; font-family: 'Source Code Pro', 'Lucida Console', Monaco, monospace;"><code>&grave;code&grave;</code></span> becomes .inline-c[code]

--

<br>

Highlight blocks of text by putting them in between two lines, each starting with three backticks <span style="background-color: #ffff88; border-radius: 3px; padding: 4px; font-family: 'Source Code Pro', 'Lucida Console', Monaco, monospace;"><code>&grave;&grave;&grave;</code></span>

````md
`r ''````
df <- mtcars %>% 
      filter(gear > 3)
```
````

becomes

```{r, eval = FALSE}
df <- mtcars %>% 
      filter(gear > 3)

```

---
class: action

## Adding Text-Based Content &mdash; Individual Work

Ideas

- migrate an exiting post into your site
- start a new page or section
   - e.g., a stand alone section summarising your CV
       - which could still link to a PDF
- start a mock post
    - e.g., use `stringi::stri_rand_lipsum` to create mock text
    - apply the syntax that we have covered above
- continue building other parts of your website


`r countdown(minutes = 30, seconds = 00, top = 0)`
---

class: inverse, center, middle

# Part 9. Adding Data-Based Content

---
Data-Based Content &mdash; Overview

- Recall that we need to use R Markdown files for pages based on data
    - e.g., pages with data analysis
    - these have the `.Rmd` extension
    - plain Markdown cannot run R code

---
class: center, middle

# Code, in and outside Chunks

---
## Code &mdash; Overview

Most codes go inside code chunks
- e.g., code that imports and cleans data, and/or produces tables and/or figures 

````md
`r ''````{r}

df <- mtcars %>%
      mutate(disp_litre = disp / 61.0237)

```
````

Codes can also go in line with text
- .e.g., code that result in a single statistic

```{r, eval=FALSE, tidy=FALSE}
The average engine displacement of the cars in the dataset is \`r mean(df$disp_litre)` litres.
```

---
## Code Chunks &mdash; Overview

- Code chunks are delimited spaces between a pair of three backticks
    - below is an empty chunk for R code

````md
`r ''````{r}

```
````

--

- `r` is an option of the chunk, indicating that the code in the chunk above should be run by R
    - it could have been `python`, which we will not cover in this workshop
    - options go in a pair of curly brackets, on the same line with the first delimiter

--

- Chunks can be placed anywhere in .Rmd documents
    - their output will be placed instead of, or following,<sup>*</sup> the code chunk on the website page

.footnote[

[*] Depending on whether code chunks are displayed or not. See the `echo` option in the following slides.

]
---
## Code Chunks &mdash; Labels

It is recommended to label the code chunks, which are otherwise automatically numbered
- informative labels can be helpful for navigating through error messages as well as filenames of plots and cache
    - in the example below, the chunk is labelled as `data_import`  
<br>
- but note that duplicate labels lead to an error


````md
`r ''````{r, `data_import`}

df <- mtcars

```
````

---
## Code Chunks &mdash; Options

- Code chunks take options, listed on the same line with the first delimiter, in curly brackets

    - avoid spaces around the equal sign <span style="background-color: #ffff88;">=</span> between option tags and values
        - such spaces might lead to errors    
<br>
    - in the example below, the chunk is labelled as `setup`, and and the `include` option is set to `FALSE`
        - with this option and value, nothing from this chunk will be included in the output document

````md
`r ''````{r, setup, `include=FALSE`}

```
````
<br>

- The list of options is available at <https://yihui.org/knitr/options>

    - R Markdown Cheat Sheet provides a helpful list as well


---
## Code Chunks &mdash; Options &mdash; Defaults

Options have default values

- e.g., for `echo`, the default is `TRUE`
      - `echo`: should the source code printed in the output?  &mdash; yes   
<br>
- therefore the following two chunks have the same function

````md
`r ''````{r}

```
````

````md
`r ''````{r, `echo=TRUE`}

```
````
---
## Code Chunks &mdash; Options &mdash; Defaults

This chunk prints two things in the output document &mdash; (a) the code and (b) the head of the data frame

````md
`r ''````{r}

head(df)

```
````

.out-t[

`head(df)`

]

<hr style="height:10px; visibility:hidden;" />

.out-t[

```{r, echo=FALSE}
head(df)
```

]

---
## Code Chunks &mdash; Options

Setting .inline-c[echo=FALSE] prevents the code from being displayed in the output document

````md
`r ''````{r, `echo=FALSE`}

head(df)

```
````

This chunk therefore prints one thing in the output document &mdash; the head of the data frame


.out-t[

```{r, include=TRUE, echo=FALSE}
head(df)
```

]

---
## Code Chunks &mdash; Other Useful Options

Prevent the result(s) of the source code from being displayed in the output document

````md
`r ''````{r, `results="hide"`}

head(df)

```
````

This chunk therefore prints one thing in the output document &mdash; the source code

.out-t[

`head(df)`

]

Setting .inline-c[results="asis"] passes the results as they are produced by the code. In creating tables for HTML output with the `stargazer` package,<sum>*</sup> it is a must.

---
## Code Chunks &mdash; Other Useful Options

Cache results for future compilations 

````md
`r ''````{r ... `cache=TRUE`}

```
````

--

Prevent R from running the code in the chunk altogether 

````md
`r ''````{r ... `eval=FALSE`}

```
````

--

Prevent messages and/or warnings from being displayed in the output

````md
`r ''````{r ... `error=FALSE`, `message=FALSE`, `warning=FALSE`}

```
````

---
## Code Chunks &mdash; Other Useful Options

Define the .yellow-h[actual] dimensions of figures, in inches

````md
`r ''````{r ... `fig.height=6`, `fig.width=9`}

```
````

--

Define the size of figures .yellow-h[in the output document], with `out.width` and/or `out.height`

````md
`r ''````{r ... `out.width="50%"`}

```
````

--

Define the alignment of figures &mdash; `left`, `right`, or `center`

````md
`r ''````{r ... `fig.align="center"`}

```
````

---
## Code Chunks &mdash; Other Useful Options

Define captions for figures

````md
`r ''````{r ... `fig.caption="A Scatter Plot"`}

```
````

--

Set the resolution for figures

````md
`r ''````{r ... `dpi=300`}

```
````

--

Set extra options, which `rmarkdown` will write into the `<img />` tag

````md
`r ''````{r ... `out.extra='style="display:block;"'`}

```
````

---
## Code Chunks &mdash; The Setup Chunk

It is recommended to use the first code chunk for general setup, where you can

- define .yellow-h[your own defaults] for chunk options, with `knitr::opts_chunk$set()`
    - avoids repeating chunk options    
<br>
- load the necessary packages    
<br>
- import raw data

````md
`r ''````{r, setup, include=FALSE}

# `chunk option defaults`
knitr::opts_chunk$set(echo=FALSE, message=FALSE)

# `packages`
library(dplyr)
library(ggplot2)
library(stargazer)

# `data`
df_raw <- mtcars

```
````

---
## Code Chunks &mdash; The Data Chunk

I recommend using the second chunk for the main operations<sup>*</sup> on raw data
- e.g., for data cleaning and other transformations
- some minor transformations could be left to lower chunks
    - e.g., capitalizing variable names for figures
        
````md
`r ''````{r, data, echo=FALSE ...}

df <- df_raw `%>%`
      `mutate(disp_litre = disp / 61.0237)`

```
````

.footnote[

[*] I will be using the pipe operator <span style="background-color: #ffff88; border-radius: 3px; padding: 4px; font-family: 'Source Code Pro', 'Lucida Console', Monaco, monospace;"><code>%>%</code></span> and other functions from the `dplyr` package for such operations in the following slides.

]

---
## Inline Code &mdash; Overview

Code can also be incorporated in text, with the <span style="background-color: #e5e5e5; border-radius: 3px; padding: 4px; font-family: 'Source Code Pro', 'Lucida Console', Monaco, monospace;"><code>&grave;r &grave;</code></span> syntax

- unline chunks, these do not take options   
<br>
- the output document will display the result of the code
    - in the exact place of the source code   
<br>
- the result of the code will have the same formatting with the text
---
## Inline Code &mdash; Examples

```{r, eval=FALSE, tidy=FALSE}
If we multiply _pi_ by 5, we get \`r pi * 5`.

```

.out-t[If we multiply _pi_ by 5, we get `r pi * 5`.]

<hr style="height:10px; visibility:hidden;" />

```{r, eval=FALSE, tidy=FALSE}
The average the engine displacement of the cars in the dataset is \`r mean(df$disp_litre)` 
litres, which would round to \`r round(mean(df$disp_litre), digits = 1)`.
```

.out-t[TThe average the engine displacment of the cars in the dataset is `r mean(df$disp_litre)`, which would round to `r round(mean(df$disp_litre), digits = 1)`.]

<hr style="height:10px; visibility:hidden;" />

```{r, eval=FALSE, tidy=FALSE}
__Only \`r nrow(subset(df, gear == 5))` cars__ in the dataset have five forward gears.
```

.out-t[__Only `r nrow(subset(df, gear == 5))` cars__ in the dataset have five forward gears.]

---

class: center, middle

# Figures

---
## Figures &mdash; Images &mdash; Markdown Syntax

The syntax <span style="background-color: #e5e5e5; border-radius: 3px; padding: 4px; font-family: 'Source Code Pro', 'Lucida Console', Monaco, monospace;">!&#91;Figure Caption&#93;(figure.extension)</span> embeds images into HTML outputs
 
- similar to the link syntax, only this time it is preceded by an exclamation mark .yellow-h[!]
- goes outside code chunks, on a new line
- assumes the figure is in the same folder with the .Rmd file<sup>*</sup>
- simple, but not very customisable

.footnote[

[*] If the image is in `static/`, use a path relative to that directory, e.g., <span style="background-color: #e5e5e5; border-radius: 3px; padding: 4px; font-family: 'Source Code Pro', 'Lucida Console', Monaco, monospace;">!&#91;Figure Caption&#93;(/img/figure.extension)</span>

]

---
## Figures &mdash; Images &mdash; Markdown Syntax

```{r, eval=FALSE}
![Some shiny boards](/img/boards.jpg)
```

```{r, echo=FALSE, fig.align="center", out.width="40%"}

knitr::include_graphics("rbd_workshop_files/images_data/boards.jpg")
```

Some shiny boards

---
## Figures &mdash; Images &mdash; Markdown Syntax

The syntax can accept `width` or `height` attributes as follows

```{r, eval=FALSE}
[Some shiny boards](/img/boards.jpg)`{ width=40% }`
```

```{r, echo=FALSE, fig.align="center", out.width="20%"}

knitr::include_graphics("rbd_workshop_files/images_data/boards.jpg")
```

Some shiny boards

---
## Figures &mdash; Images &mdash; `knitr`

The `knitr` package offers a capable alternative with the `include_graphics()` function

- this goes inside code chunks
    - use the function with the double-colon operator <span style="background-color: #ffff88">::</span>     
        - e.g., `knitr::include_graphics("figure.extension")`    
--
<br>

- this is more customisable, through the use of code chunks
    - size is defined with the `out.width` or `out.hight` options
        - rather than `fig.height` and/or `fig.width`
--
<br>

- If the image is in `static/`, rather than in the same directory with the `.Rmd` file
    - use a path relative to that directory,
    - and set <span style="background-color: #e5e5e5; border-radius: 3px; padding: 4px; font-family: 'Source Code Pro', 'Lucida Console', Monaco, monospace;">error = FALSE</span> in the function

---
## Figures &mdash; Images &mdash; `knitr`

The `knitr` package offers a capable alternative with the `include_graphics()` function

````md
`r ''````{r, screenshot, echo=FALSE, fig.cap="Some shiny boards"}

knitr::include_graphics("/img/boards.jpg", error = FALSE)

```
````

```{r, echo=FALSE, out.width="25%"}

knitr::include_graphics("rbd_workshop_files/images_data/boards.jpg")
```

Some shiny boards

---
## Figures &mdash; Images &mdash; `knitr`

Size is defined with the chunk options `out.width` or `out.hight` 

````md
`r ''````{r ... `out.width="40%"`}

knitr::include_graphics("/img/boards.jpg", error = FALSE)

```
````
--

Most other chunk options are common with figures plotted within R Markdown, such as `fig.align`


````md
`r ''````{r ... `fig.align="center"`}

knitr::include_graphics("/img/boards.jpg", error = FALSE)

```
````
---
## Figures &mdash; `ggplot2` &mdash; Overview

- A powerful package for visualising data 

- Used widely, not only by academics, but also by large corporations such as the New York Times

- A huge amount is written on this package. See, for example, 

    - the [package documentation](https://www.rdocumentation.org/packages/ggplot2/versions/3.2.1)
    - this [book](https://ggplot2-book.org/) by its creator Hadley Wickham
    - this [reference page](https://ggplot2.tidyverse.org/reference/)
    - this [webinar](https://www.youtube.com/watch?v=h29g21z0a68) by one of its authors, Thomas Lin Pedersen  
    - these [futher extensions](https://www.rdocumentation.org/packages/ggplot2/versions/3.2.1), maintained by the `ggplot2` community

- Among its alternatives are the `base` and `plotly` packages

---
## Figures &mdash; `ggplot2` &mdash; Basics

1) The `ggplot` function and the `data` argument
- specify a data frame in the main `ggplot` function

```{r, eval=FALSE, tidy=FALSE}
ggplot(data = df)
```

--

2) The mapping aesthetics, or .yellow-h[aes]; most importantly, the variable(s) that we want to plot
- specify as an additional argument in the same `ggplot` function

```{r, eval=FALSE, tidy=FALSE}
ggplot(data = df, `mapping = aes(x = wt, y = mpg, color = cyl)`)
```

--

3) The geometric objects, or .yellow-h[geom]; the visual representations
- specify, after a plus sign .yellow-h[+], as an additional function

```{r, eval=FALSE, tidy=FALSE}
ggplot(data = df, mapping = aes(x = wt, y = mpg, color = cyl)) `+`
  geom_point() #<<
```

---
## Figures &mdash; `ggplot2`

Put the code in a chunk, and give it a caption

.pull-left-c[

````md
`r ''````{r, scatterplot, `fig.cap = "A scatterplot of cars."`}

ggplot(data = df, mapping = aes(x = wt, y = mpg, color = cyl)) +
  geom_point()

```
````

]

.pull-right-c[

```{r, echo=FALSE, fig.height=6, fig.width=9}

ggplot(data = df, mapping = aes(x = wt, y = mpg, color = cyl)) +
       geom_point(size = 4) + 
       theme(axis.title = element_text(size = 20),
             axis.text = element_text(size = 20),
             legend.title = element_text(size = 20),
             legend.text = element_text(size = 20))

```

Figure 1. A scatterplot of cars.

]

---
## Figures &mdash; `ggplot2`

Improve the figure


.pull-left-c[

````md
`r ''````{r, scatterplot, fig.cap = "A scatterplot of cars."}

ggplot(data = df, mapping = aes(x = wt, y = mpg, color = cyl)) +
  geom_point() `+`
  `scale_colour_gradient(name = "Cylinders", high = "#132B43", low = "#56B1F7",`
                        `breaks = c(4, 6, 8)) +`
  `labs(x = "Weight", y = "Miles/Gallon") +`
  `theme_bw()`

```
````

]

.pull-right-c[

```{r, echo=FALSE, fig.height=6, fig.width=9}

ggplot(data = df, mapping = aes(x = wt, y = mpg, color = cyl)) +
  geom_point(size = 2) +
  scale_colour_gradient(name = "Cylinders", high = "#132B43", low = "#56B1F7",
                        breaks = c(4, 6, 8)) +
  theme_bw() +
  theme(axis.title = element_text(size = 20),
        axis.text = element_text(size = 20),
        legend.title = element_text(size = 20),
        legend.text = element_text(size = 20)) +
  labs(x = "\nWeight", y = "Miles/Gallon\n")

```

Figure 1. A scatterplot of cars.

]


---

## Figures &mdash; `ggplot2` &mdash; Notes

`geom_point` is one of many geoms available
- see this <https://ggplot2.tidyverse.org/reference> for other options, including
    - `geom_bar` for bar charts
    - `geom_boxplot` for box and whiskers plots

---

class: center, middle

# Tables

---
## Tables &mdash; Markdown Syntax

The following syntax, outside code chunks, introduces tables that `pandoc` can recognise

.pull-left[

<br>

```{r eval=FALSE, tidy=FALSE}

First Column  Second Column 
------------  ------------- 
First cell    First cell      
Second cell   Second cell   
Third cell    Third cell  

```

]

.pull-right[

<br>

|  First Column | Second Column |                     
|:------------- |:--------------| 
| First cell |  First cell |            
| Second cell |  Second cell |         
| Third cell |  Third cell |          


]

---
## Tables &mdash; Markdown Syntax

The position of headers, relative to their line underneath, defines column alignments

.pull-left[

<br>

```{r eval=FALSE, tidy=FALSE}

Left-Aligned          Centered   
----------------  ----------------
First cell        First cell      
Second cell       Second cell   
Third cell        Third cell  

```

]

.pull-right[

<br>

| Left-Aligned &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | &nbsp;&nbsp;&nbsp; Centered  &nbsp;&nbsp;&nbsp; |               
|:-------------------------------------  | :-----------------------------------: | 
| First cell | First cell | 
| Second cell| Second cell | 
| Third cell | Third  cell |       


]

---
## Tables &mdash; Markdown Syntax

A line starting with a colon, placed before or after tables, introduces captions

<br>

.pull-left[

```{r eval=FALSE, tidy=FALSE}

    Centered         Right-Aligned 
----------------  ----------------
First cell        First cell      
Second cell       Second cell   
Third cell        Third cell  
                                                                               
: A hand-made table with R Markdown                                      #<<
                                                                               
```

]

.pull-right[

<center>A hand-made table with R Markdown</center> 
<br>

| &nbsp;&nbsp;&nbsp; Centered  &nbsp;&nbsp;&nbsp; |  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Right-Aligned |               
|:----------------------------------------------: | --------------------------------------------------: | 
| First cell | First cell | 
| Second cell| Second cell | 
| Third cell | Third  cell |       


]

---
## Tables &mdash; Markdown Syntax

The caption line itself needs to be surrounded by empty lines

<br>

.pull-left[

```{r eval=FALSE, tidy=FALSE}

    Centered         Right-Aligned 
----------------  ----------------
First cell        First cell      
Second cell       Second cell   
Third cell        Third cell  
                                                                               #<<
: A hand-made table with R Markdown                                      
                                                                               #<<
```

]

.pull-right[

<center>A hand-made table with R Markdown</center> 
<br>

| &nbsp;&nbsp;&nbsp; Centered  &nbsp;&nbsp;&nbsp; |  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Right-Aligned |               
|:----------------------------------------------: | --------------------------------------------------: | 
| First cell | First cell | 
| Second cell| Second cell | 
| Third cell | Third  cell |       


]

---
## Tables &mdash; Markdown Syntax

Grid tables, with the following syntax, can handle complex cells with multiple lines and/or lists

.pull-left[

```{r eval=FALSE, tidy=FALSE}
+--------------------+--------------------+
| First Column       | Second Column      | 
+====================+====================+
| - First item       | First cell         | 
| - Second item      |                    | 
| - Third item       |                    |
+--------------------+--------------------+
|Second cell         | Second cell with a | 
|                    | long text          | 
+--------------------+--------------------+
| Third cell         | Third cell         | 
|                    |                    | 
+--------------------+--------------------+

: A grid table with multi-line cells                                                         
```

]

.pull-right[

<br>
<center>A grid table with multi-line cells</center> 
<br>

| First Column &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Second Column &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |
|:------------------------------------------  |:--------------------------------------------------| 
| - First item <br> - Second item <br> - Third item | First cell                                        |         
| Second cell                                       | Second cell with a long<br>text                   | 
| Third cell                                        | Third cell                                        | 

]

---
## Tables &mdash; Markdown Syntax

Grid tables can be aligned as well, with colons at the boundaries of the header separator<sup>*</sup>

.pull-left[

```{r eval=FALSE, tidy=FALSE}
+--------------------+--------------------+
| Left-Aligned       | Centered           | 
+:===================+:==================:+ #<<
| - First item       | First cell         | 
| - Second item      |                    | 
| - Third item       |                    |
+--------------------+--------------------+
|Second cell         | Second cell with a | 
|                    | long text          | 
+--------------------+--------------------+
| Third cell         | Third cell         | 
|                    |                    | 
+--------------------+--------------------+

: A grid table with multi-line cells                                                         
```

]

.pull-right[

<br>
<center>A grid table with multi-line cells</center> 
<br>

| Left-Aligned &nbsp;&nbsp;&nbsp;&nbsp; | &nbsp;&nbsp;Centered &nbsp;&nbsp; |
|:--------------------------------------|:---------------------------------:| 
| - First item <br> - Second item <br> - Third item | First cell |         
| Second cell | Second cell with a<br>long text | 
| Third cell | Third cell | 


]

.footnote[

[*] Use .yellow-h[:=] for left-aligned, .yellow-h[:=:] for centered, .yellow-h[=:] for right-aligned columns. 

]

---
## Tables &mdash; `stargazer` &mdash; Overview

- A capable package for creating tables to present

    - data in columns and rows
    - descriptive/summary statistics
    - regression models

- Used widely by academics

- Creates LaTeX code, HTML/CSS code, and ASCII text to be knitted

- A lot is written on this package. See, for example, 

    - the [package documentation](https://www.rdocumentation.org/packages/stargazer/versions/5.2.2)
    - this [vignette](https://cran.r-project.org/web/packages/stargazer/vignettes/stargazer.pdf) by its author Marek Hlavac
    - this [tutorial](https://www.jakeruss.com/cheatsheets/stargazer/) by Jake Russ

---
## Tables &mdash; `stargazer` &mdash; Notes

- We must

  - set the chunk option .inline-c[results="asis"] for chunks with stargazer tables  
<br>
  - set the argument <span style="background-color: #e5e5e5; border-radius: 3px; padding: 4px; font-family: 'Source Code Pro', 'Lucida Console', Monaco, monospace;">type = "html"</span> in the `stargazer()` function

---
## Tables &mdash; `stargazer` &mdash; Basics

- The `stargazer()` function

    - this is probably the only fuction you will ever use from this package
        - but it accepts many, many arguments to customise tables

--

- The `data` argument of that function, with two main options

    1. a data frame for data or summary statistics tables
        - e.g., `df`, here originating from `mtcars`
<br>
    2. one or more regression models for regression tables
        - e.g., `lm1`, here coming from <span style="background-color: #e5e5e5; border-radius: 3px; padding: 4px; font-family: 'Source Code Pro', 'Lucida Console', Monaco, monospace;">lm1 <- lm(mpg ~ cyl, data = df)</span> 
    
---
## Tables &mdash; `stargazer` &mdash; Data Tables

Table the first four rows of the dataset

````md
`r ''````{r data_table, `echo=FALSE`, `results="asis"`}

stargazer(data = head(df, n = 4), `type = "html"`, `summary = FALSE`)

```
````
--

Notice the options of the chunk and the arguments of the function

- with .inline-c[echo=FALSE], the code will not be displayed in the output document

--

- with .inline-c[results="asis"], `knitr` will pass through results without reformatting them 
    - these results are produced in HTML, due to <span style="background-color: #e5e5e5; border-radius: 3px; padding: 4px; font-family: 'Source Code Pro', 'Lucida Console', Monaco, monospace;">type = "html"</span>
    - they should be HTML because our outcome is a website page
    
--

- with .inline-c[summary = FALSE], the table will present the data, not its descriptive statistics

---
## Tables &mdash; `stargazer` &mdash; Data Tables 

Table the first four rows of the dataset

````md
`r ''````{r data_table, echo=FALSE, results="asis"}

stargazer(data = head(df, n = 4), type = "html", summary = FALSE)

```
````
.medium[

```{r, echo=FALSE, results="asis"}

stargazer(data = head(df, n = 4), type = "html", summary = FALSE)

```

]

---
## Tables &mdash; `stargazer` &mdash; Data Tables 

Define a caption with the `title` argument
````md
`r ''````{r data_table, echo=FALSE, results="asis"}

stargazer(data = head(df, n = 4), type = "html", summary = FALSE,
          `title = "First four rows of the dataset"`)

```
````

.medium[

```{r, echo=FALSE, results="asis"}

stargazer(data = head(df, n = 4), type = "html", summary = FALSE)

```

<br>

<center>First four rows of the dataset</center> 

]

---
## Tables &mdash; `stargazer` &mdash; Summary Statistics Tables 

Create a table of summary statistics instead, for the complete dataset

````md
`r ''````{r summary_table, echo=FALSE, results="asis"}

stargazer(data = df, type = "html", `summary = TRUE`, flip = TRUE,
          title = "Descriptive statistics", omit.summary.stat = c("p25", "p75"))

```
````

.medium[


```{r, echo=FALSE, results="asis"}

stargazer(data = df, type = "html", summary = TRUE, flip = TRUE,
          omit.summary.stat = c("p25", "p75"))

```

<br>

<center>Descriptive statistics</center> 

]

---
## Tables &mdash; `stargazer` &mdash; Regression Tables

.pull-left-c[

Create a table of regression models instead

````md
`r ''````{r regression_table, echo=FALSE, results="asis"}

stargazer(`data = lm(mpg ~ cyl, data = df)`, 
          type = "html", title = "Regression Results")

```
````

]

.pull-right-c[

.medium[


```{r echo = FALSE, results = "asis"}

stargazer(data = lm(mpg ~ cyl, data = df), type = "html")

```

<br>

<center>Regression Results</center> 

]

]

---
## Tables &mdash; `stargazer` &mdash; Regression Tables

.pull-left-c[

Models can also be estimated outside the function first

````md
`r ''````{r regression_table, echo=FALSE, results="asis"}

 `lm1 <- lm(mpg ~ cyl, data = df)`

 stargazer(`data = lm1`, type = "html",
           title = "Regression Results")

```
````

]

.pull-right-c[

.medium[


```{r echo = FALSE, results = "asis"}

stargazer(data = lm1, type = "html")

```

<br>

<center>Regression Results</center> 

]

]

---
## Tables &mdash; `stargazer` &mdash; Regression Tables

.pull-left-c[

Keep only a selection of statistics

````md
`r ''````{r regression_table, echo=FALSE, results="asis"}

stargazer(data = lm1, type = "html",
          title = "Regression Results", 
          `keep.stat = c("n", "rsq")`)

```
````

]

.pull-right-c[

.medium[

```{r echo = FALSE, results = "asis"}

stargazer(data = lm1, type = "html", keep.stat = c("n", "rsq"))

```

<br>

<center>Regression Results</center> 

]
]

---
## Tables &mdash; `stargazer` &mdash; Regression Tables 

.pull-left-c[

Display multiple models in the same table

````md
`r ''````{r regression_table, echo=FALSE, results="asis"}

stargazer(`data = list(lm1, lm2)`, type = "html", 
          title = "Regression Results", 
          keep.stat = c("n", "rsq"))

```
````

]

.pull-right-c[

.medium[


```{r echo = FALSE, results = "asis"}

stargazer(data = list(lm1, lm2), type = "html", keep.stat = c("n", "rsq"))

```

<br>

<center>Regression Results</center> 

]

]

---
## Tables &mdash; `stargazer` &mdash; Regression Tables

.pull-left-c[

Change variable labels

````md
`r ''````{r regression_table, echo=FALSE, results="asis"}

stargazer(data = list(lm1, lm2), type = "html", 
          title = "Regression Results", 
          keep.stat = c("n", "rsq"),
          `dep.var.labels = "Miles/Gallon"`,
          `covariate.labels = c("Cylinders", "Displacement")`)

```
````

]

.pull-right-c[

.medium[

```{r echo = FALSE, results = "asis"}

stargazer(data = list(lm1, lm2), type = "html", keep.stat = c("n", "rsq"),
          dep.var.labels = "Miles/Gallon",
          covariate.labels = c("Cylinders", "Displacement"))

```

<br>

<center>Regression Results</center> 

]

]

---
## Tables &mdash; `stargazer` &mdash; Regression Tables

.pull-left-c[

Change significance levels

````md
`r ''````{r regression_table, echo=FALSE, results="asis"}

stargazer(data = list(lm1, lm2), type = "html", 
          title = "Regression Results", 
          keep.stat = c("n", "rsq"),
          dep.var.labels = "Miles/Gallon",
          covariate.labels = c("Cylinders", "Displacement"),
          `star.cutoffs = c(0.05, 0.01, 0.001)`)

```
````

]

.pull-right-c[

.medium[

```{r echo = FALSE, results = "asis"}

stargazer(data = list(lm1, lm2), type = "html", keep.stat = c("n", "rsq"),
          dep.var.labels = "Miles/Gallon",
          covariate.labels = c("Cylinders", "Displacement"),
          star.cutoffs = c(0.05, 0.01, 0.001))

```

<br>

<center>Regression Results</center> 

]

]

---
class: action

## Adding Data-Based Content &mdash; Individual Work

Ideas

- migrate an exiting data-based post into your site
- start a new data-based post
- start a mock data-based post
    - e.g., use one of R's built-in datasets
        - use the `data()` function to see the list
- continue building other parts of your website


`r countdown(minutes = 30, seconds = 00, top = 0)`

---
class: inverse, center, middle 

## That's it &mdash; we have done it!

---
class: center, middle 

## Thank you!

---
class: inverse, center, middle

# References

---
## References

Allaire, J. J., Xie, Y., McPherson, J., Luraschi, J., Ushey, K., Atkins, A., Wickham, H., Cheng, J., Chang, W. and Iannone, R. (2020). [rmarkdown: Dynamic documents for R](https://cran.r-project.org/web/packages/rmarkdown/index.html). R package, version 2.1.

Dowle, M. and Srinivasan, A. (2019). [data.table: Extension of 'data.frame'](https://cran.r-project.org/web/packages/data.table/index.html). R package, version 1.12.8.

Hlavac, M. (2018). [stargazer: Well-formatted regression and summary statistics tables](https://cran.r-project.org/web/packages/stargazer/index.html). R package, version 5.2.2.

Wickham, H. and Grolemund, G. (2019). R for data science. O'Reilly. Open access at [https://r4ds.had.co.nz](https://r4ds.had.co.nz/).

Wickham, H., Chang, W., Henry, L., Pedersen, T. L., Takahashi, K., Wilke, C., Woo, K., Yutani, H. and Dunnington, D. (2020a). [dplyr: A grammar of data manipulation](https://cran.r-project.org/web/packages/dplyr/index.html). R package, version 0.8.5.

Wickham, H., François, W., Henry L. and Müller, K. (2020b). [ggplot2: Create elegant data visualisations using the grammar of graphics](https://cran.r-project.org/web/packages/ggplot2/index.html). R package, version 0.8.5.

Xie, Y. (2020b). [knitr: A general-purpose package for dynamic report generation in R](https://cran.r-project.org/web/packages/knitr/index.html). R package, version 1.28.

Xie, Y. (2020c). [bookdown: Authoring books and technical documents with R Markdown](https://cran.rstudio.com/web/packages/bookdown/index.html). R package, version 0.18.

---
## References

Xie, Y. (2020d). [blogdown: Create blogs and websites with R Markdown](https://cran.r-project.org/web/packages/blogdown/index.html). R package, version 0.18.

Xie, Y., Thomas, A., and Hill, A. P. (2018). blogdown: Creating Websites with R Markdown. Open access at [https://bookdown.org/yihui/blogdown/](https://bookdown.org/yihui/blogdown/).

Xie, Y., Allaire, J. J., and Grolemund, G. (2019). R markdown: The definitive guide. CRC Press. Open access at [https://bookdown.org/yihui/rmarkdown](https://bookdown.org/yihui/rmarkdown/).

Zhu, H. (2019). [kableExtra: Construct Complex Table with 'kable' and Pipe Syntax](https://cran.r-project.org/web/packages/kableExtra/index.html). R package, version 1.1.0.

