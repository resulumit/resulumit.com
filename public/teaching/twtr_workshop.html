---
title: "Working with Twitter Data in R"
subtitle: "Resul Umit"
institute: ""
date: "February 2021"
output:
  xaringan::moon_reader:
    lib_dir: libs
    nature:
      highlightStyle: github
      highlightLines: true
      highlightSpans: true
      countIncrementalSlides: false
      ratio: "16:9"
    seal: false
---

<link href="/rmarkdown-libs/countdown/countdown.css" rel="stylesheet" />
<script src="/rmarkdown-libs/countdown/countdown.js"></script>


<p>class: inverse, center, middle</p>
<style type="text/css">

.hljs-github .hljs {
    background: #e5e5e5;
}

.inline-c, remark-inline-code {
   background: #e5e5e5;
   border-radius: 3px;
   padding: 4px;
   font-family: 'Source Code Pro', 'Lucida Console', Monaco, monospace;
}


.yellow-h{
   background: #ffff88;
}


.out-t, remark-inline-code {
   background: #9fff9f;
   border-radius: 3px;
   padding: 4px;
   
}

.pull-left-c {
    float: left;
    width: 58%;
    
}

.pull-right-c {
    float: right;
    width: 38%;
    
}

.medium {
    font-size: 75%
    
}

.small {
    font-size: 50%
    }

.action {
    background-color: #f2eecb;
  
}


</style>
<div id="working-with-twitter-data-in-r" class="section level1">
<h1>Working with Twitter Data in R</h1>
<p><br></p>
<div id="resul-umit" class="section level3">
<h3>Resul Umit</h3>
</div>
<div id="february-2021" class="section level3">
<h3>February 2021</h3>
<p>.footnote[</p>
<p><a href="#contents-slide">Skip intro — To the contents slide</a>.]</p>
</div>
<div id="the-workshop-overview" class="section level2">
<h2>The Workshop — Overview</h2>
<ul>
<li><p>Two days, on how to collect, process, and analyse data from Twitter</p>
<ul>
<li>150+ slides, 75+ exercises</li>
<li>support for applications to Twitter, developing real projects</li>
</ul></li>
</ul>
<p>–</p>
<p><br></p>
<ul>
<li><p>Designed for researchers with basic knowledge of R programming language</p>
<ul>
<li>does not cover programming with R
<ul>
<li>e.g., writing functions<br />
<br></li>
</ul></li>
<li>existing ability to work with data in R will be very helpful
<ul>
<li>but not absolutely necessary — this ability can be developed during and after the workshop as well</li>
</ul></li>
</ul></li>
</ul>
</div>
<div id="the-workshop-motivation-opportunities" class="section level2">
<h2>The Workshop — Motivation — Opportunities</h2>
<ul>
<li><p>Popularity of the network</p>
<ul>
<li>about 350 million users, more than half are daily active</li>
<li>your subjects are likely Twitter users
<ul>
<li>e.g., for me, members of parliament</li>
</ul></li>
</ul></li>
</ul>
</div>
<div id="the-workshop-motivation-opportunities-1" class="section level2">
<h2>The Workshop — Motivation — Opportunities</h2>
<ul>
<li><p>Popularity of the network</p>
<ul>
<li>about 350 million users, more than half are daily active</li>
<li>your subjects are likely Twitter users
<ul>
<li>e.g., for me, members of parliament</li>
</ul></li>
</ul></li>
</ul>
<p><br></p>
<ul>
<li><p>Richness of the data</p>
<ul>
<li>about 500 million tweets per day</li>
<li>with up to 90 variables for each tweet</li>
</ul></li>
</ul>
<p><br></p>
<ul>
<li><p>Accessibility of the data</p>
<ul>
<li>most Twitter data are public
<ul>
<li>i.e., relatively few private profiles<br />
<br></li>
</ul></li>
<li>APIs (application programming interfaces) enable programmatic access to Twitter
<ul>
<li>e.g., downloading tweets with R, as opposed to viewing tweets as visualised via browsers</li>
</ul></li>
</ul></li>
</ul>
</div>
<div id="the-workshop-motivation-aims" class="section level2">
<h2>The Workshop — Motivation — Aims</h2>
<ul>
<li><p>To provide you with an understanding of what is possible</p>
<ul>
<li>we will cover a large breath of issues, not all of it is for long-term memory
<ul>
<li>hence the slides are designed for self study as well<br />
<br></li>
</ul></li>
<li>awareness of what is possible, <code>Google</code>, and perseverance are all you need</li>
</ul></li>
</ul>
<p>–</p>
<p><br></p>
<ul>
<li><p>To start you with acquiring and practicing the skills needed</p>
<ul>
<li>practice with ready-written code</li>
<li>start working on a real project</li>
</ul></li>
</ul>
</div>
<div id="the-workshop-organisation" class="section level2">
<h2>The Workshop — Organisation</h2>
<ul>
<li><p>Sit in groups of two</p>
<ul>
<li>participants learn as much from their partner as from instructors</li>
<li>switch partners after every part</li>
</ul></li>
</ul>
<p><br>
- Type, rather than copy and paste, the code that you will find on these slides</p>
<ul>
<li>typing is a part of the learning process</li>
</ul>
<p><br>
- When you have a question</p>
<ul>
<li>ask your partner</li>
<li>google together</li>
<li>ask me</li>
</ul>
</div>
<div id="the-workshop-organisation-slides" class="section level2">
<h2>The Workshop — Organisation — Slides</h2>
<ul>
<li><p>Codes and texts that go in R console or scripts .inline-c[appear as such — in a different font, on gray background]</p>
<ul>
<li>long codes and texts will have their own line(s)</li>
</ul></li>
</ul>
<pre class="r"><code># read in  the tweets dataset
df &lt;- read_rds(&quot;tweets.rds&quot;) %&gt;%
  
# split the variable text, create a new variable called da_tweets   
  unnest_tokens(output = da_tweets, input = text, token = &quot;tweets&quot;) %&gt;%
 
# remove rows that match any of the stop words as stored in the stop_words dataset 
  anti_join(stop_words, by = c(&quot;da_tweets&quot; = &quot;word&quot;)) </code></pre>
<p>name: part1
class: inverse, center, middle</p>
</div>
</div>
<div id="part-1.-preliminary-considerations" class="section level1">
<h1>Part 1. Preliminary Considerations</h1>
<p>.footnote[</p>
<p><a href="#contents-slide">Back to the contents slide</a>.</p>
<p>]</p>
<div id="considerations-potential-biases" class="section level2">
<h2>Considerations — Potential Biases</h2>
<p>There are at least two potential sources of bias in Twitter data</p>
<ul>
<li><p>sampling</p>
<ul>
<li>Twitter users are not representative of the people out there
<ul>
<li>see, for example, <a href="https://doi.org/10.1177%2F2053168017720008">Mellon and Prosser (2017)</a><br />
<br></li>
</ul></li>
<li>Tweeting behaviour has a strategic component
<ul>
<li>see, for example, <a href="https://doi.org/10.1080/13572334.2017.1283166">Umit (2017)</a></li>
</ul></li>
</ul></li>
</ul>
<table style="width:4%;">
<colgroup>
<col width="4%" />
</colgroup>
<tbody>
<tr class="odd">
<td>name: potential-biases</td>
</tr>
<tr class="even">
<td>- mediation</td>
</tr>
<tr class="odd">
<td>- the behaviour on Twitter is mediated through written and unwritten rules
- e.g., there is a button to like, but no dislike
- might systematically bias the replies towards negative
<br>
- e.g., the common use of the like function as a bookmark
- what would a study of Twitter likes be measuring?</td>
</tr>
</tbody>
</table>
</div>
<div id="considerations-constraints-over-data-access" class="section level2">
<h2>Considerations — Constraints over Data Access</h2>
<ul>
<li><p>Twitter has restrictions on data access</p>
<ul>
<li>how much data is available to download</li>
<li>how quickly, how frequently, how far dating back <em>etc</em>.</li>
</ul></li>
</ul>
<table style="width:4%;">
<colgroup>
<col width="4%" />
</colgroup>
<tbody>
<tr class="odd">
<td><br></td>
</tr>
<tr class="even">
<td>- These restrictions vary across API types</td>
</tr>
<tr class="odd">
<td>- e.g., <a href="https://developer.twitter.com/en/docs/twitter-api/v1">Standard v1.1</a> is the most restrictive APIs
- others first generation APIs are the <a href="https://developer.twitter.com/en/products/twitter-api/premium-apis">Premium v1.1</a> and <a href="https://developer.twitter.com/en/products/twitter-api/enterprise">Enterprise: Gnip 2.0</a> APIs — both with paid subscriptions
- there are also the second generation APIs, including the newly announced <a href="https://blog.twitter.com/developer/en_us/topics/tips/2021/enabling-the-future-of-academic-research-with-the-twitter-api.html">Academic Research product track</a></td>
</tr>
</tbody>
</table>
<p><br></p>
<ul>
<li><p>These restrictions also vary within APIs types, across different operations</p>
<ul>
<li>e.g., collecting tweets in real time <em>vs</em>. collecting historical tweets
<ul>
<li>but also, collecting historical tweets from a specific user <em>vs</em>. tweets from any user</li>
</ul></li>
</ul></li>
</ul>
</div>
<div id="considerations-changes-in-the-twitter-apis" class="section level2">
<h2>Considerations — Changes in the Twitter APIs</h2>
<ul>
<li><p>Twitter is currently switching to a new generation of APIs</p>
<ul>
<li>replacing APIs v1 with v2
<ul>
<li>each with various types of APIs<br />
<br></li>
</ul></li>
<li>the switch is not complete, outcome is not clear
<ul>
<li>see the <a href="https://developer.twitter.com/en/docs/twitter-api/early-access">early access</a> options</li>
</ul></li>
</ul></li>
</ul>
<table style="width:4%;">
<colgroup>
<col width="4%" />
</colgroup>
<tbody>
<tr class="odd">
<td><br></td>
</tr>
<tr class="even">
<td>- Twitter might change the rules of the APIs game at any anytime, again</td>
</tr>
<tr class="odd">
<td>- making the existing restrictions more or less strict
- e.g., while you are in the middle of data collection
<br>
- breaking your plans, code</td>
</tr>
</tbody>
</table>
</div>
<div id="considerations-changes-in-the-twitter-apis-notes" class="section level2">
<h2>Considerations — Changes in the Twitter APIs — Notes</h2>
<ul>
<li><p>Existing codes to collect tweets may or may not be affected, depending on</p>
<ul>
<li>how the APIs v2 will look in the end
<ul>
<li>it is still a work in progress<br />
<br></li>
</ul></li>
<li>whether and how the <code>rtweet</code> package<sup>*</sup> will adopt
<ul>
<li>personal communication: it will support v2</li>
</ul></li>
</ul></li>
</ul>
<p>.footnote[</p>
<p><sup>*</sup> This is the R package that we will use to collect tweets. More details are in <a href="#part2">Part 2</a>.</p>
<p>]</p>
</div>
<div id="considerations-law-and-ethics" class="section level2">
<h2>Considerations — Law and Ethics</h2>
<ul>
<li><p>It is often impossible to get users’ consent</p>
<ul>
<li>i.e., for collecting and analysing their data on Twitter<br />
<br></li>
<li>Twitter itself has no problem with it, but others might disagree
<ul>
<li>e.g., your law makers, (funding and/or research) institution, subjects, conscience</li>
</ul></li>
</ul></li>
</ul>
<p>–</p>
<p><br></p>
<ul>
<li><p>Check the rules that apply to your case</p>
<ul>
<li>rules and regulations in your country, at your institution</li>
</ul></li>
</ul>
<p>–</p>
<p><br></p>
<ul>
<li><p>Reflect on whether using Twitter data for research is ethical</p>
<ul>
<li>even where it is legal and allowed, it may not be moral</li>
</ul></li>
</ul>
</div>
<div id="considerations-language-and-context" class="section level2">
<h2>Considerations — Language and Context</h2>
<ul>
<li><p>Some tools of text analysis are developed for a specific language and/or context</p>
<ul>
<li>e.g., dictionaries for sentiment analysis
<ul>
<li>might be in English, political texts, only</li>
</ul></li>
<li>these may not be useful, valid for different languages, and contexts</li>
</ul></li>
</ul>
<p>–</p>
<p><br></p>
<ul>
<li><p>Some tools of text analysis are developed for general use</p>
<ul>
<li><p>e.g., a dictionary for sentiments in everyday language</p></li>
<li><p>these may not be useful, valid for a specific context</p>
<ul>
<li>e.g., political texts</li>
</ul></li>
</ul></li>
</ul>
<p>class: action</p>
</div>
<div id="workshop-slides-access-on-your-browser" class="section level2">
<h2>Workshop Slides — Access on Your Browser</h2>
<ul>
<li><p>Having the workshop slides<sup>*</sup> on your own machine might be helpful</p>
<ul>
<li>flexibility to go back and forward on your own</li>
<li>ability to scroll across long codes on some slides</li>
</ul></li>
</ul>
<p><br></p>
<ul>
<li><p>Access at <a href="https://resulumit.com/teaching/twtr_workshop.html" class="uri">https://resulumit.com/teaching/twtr_workshop.html</a></p>
<ul>
<li>will remain accessible after the workshop</li>
<li>might crash for some Safari users
<ul>
<li>if using a different browser application is not an option, view the <a href="https://github.com/resulumit/twtr_workshop/blob/master/presentation/twtr_workshop.pdf">PDF version of the slides</a> on GitHub</li>
</ul></li>
</ul></li>
</ul>
<p>.footnote[</p>
<p><sup>*</sup> These slides are produced in R, with the <code>xaringan</code> package (<a href="https://cran.r-project.org/web/packages/xaringan/xaringan.pdf">Xie, 2020</a>).</p>
<p>]</p>
</div>
<div id="course-materials-overview" class="section level2">
<h2>Course Materials — Overview</h2>
<p>Materials have the following structure</p>
<pre><code>
twtr_workshop-materials
   |
   |- data
   |  |
   |  |- mps.csv
   |  |- status_ids.rds
   |  |- tweets.rds
   |
   |- analysis
   |  |
   |  |- tweet_based.Rmd
   |  |- tweet_based_answers.Rmd
   |  |- user_based.Rmd
   |  |- user_based_answers.Rmd
</code></pre>
</div>
<div id="course-materials-contents" class="section level2">
<h2>Course Materials — Contents</h2>
<ul>
<li><p><code>tweet_based.Rmd</code></p>
<ul>
<li>an R Markdown file with exercises for <a href="#part-6">Part 6</a></li>
<li>the solution to these exercises are in <code>tweet_based_answers.Rmd</code></li>
</ul></li>
</ul>
<p><br></p>
<ul>
<li><p><code>user_based.Rmd</code></p>
<ul>
<li>an R Markdown file with exercises for <a href="#part-5">Part 5</a></li>
<li>the solution to these exercises are in <code>user_based_answers.Rmd</code></li>
</ul></li>
</ul>
<p>class: action</p>
</div>
<div id="rstudio-download-from-the-internet-and-install" class="section level2">
<h2>RStudio — Download from the Internet and Install</h2>
<ul>
<li><p>Optional, but highly recommended</p>
<ul>
<li>facilitates working with Twitter data in R</li>
</ul></li>
</ul>
<p><br></p>
<ul>
<li><p>A popular integrated development environment (IDE) for R</p>
<ul>
<li>an alternative: <a href="https://www.gnu.org/software/emacs/">GNU Emacs</a></li>
</ul></li>
</ul>
<p><br></p>
<ul>
<li><p>Download RStudio from <a href="https://rstudio.com/products/rstudio/download">https://rstudio.com/products/rstudio/download</a></p>
<ul>
<li>choose the free version</li>
<li>consider updating your copy, if it is not up to date, following from the RStudio menu:</li>
</ul></li>
</ul>
</div>
<div id="help---check-for-updates" class="section level2">
<h2>&gt; <code>Help -&gt; Check for Updates</code></h2>
<p>class: action
name: rstudio-project</p>
</div>
<div id="rstudio-project-create-from-within-rstudio" class="section level2">
<h2>RStudio Project — Create from within RStudio</h2>
<ul>
<li><p>RStudio allows for dividing your work with R into separate projects</p>
<ul>
<li>each project gets dedicated workspace, history, and source documents</li>
<li><a href="https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects">this page</a> has more information on why projects are recommended</li>
</ul></li>
</ul>
<p><br></p>
<ul>
<li>Create a new RStudio project for the existing<sup>*</sup> workshop directory <code>...\twtr_workshop-materials</code> from the RStudio menu:</li>
</ul>
<blockquote>
<p><code>File -&gt; New Project -&gt; Existing Directory -&gt; Browse -&gt; ...\twtr_workshop-materials -&gt; Open</code></p>
</blockquote>
<p>.footnote[</p>
<p><sup>*</sup> Recall that we have downloaded this earlier from GitHub. <a href="#download-zip">Back to the relevant slide</a>.</p>
<p>]</p>
<p>class: action</p>
</div>
<div id="r-packages-install-from-within-rstudio" class="section level2">
<h2>R Packages — Install from within RStudio</h2>
<pre class="r"><code>install.packages(c(&quot;rtweet&quot;, &quot;httpuv&quot;, &quot;tidyverse&quot;, &quot;tidytext&quot;))</code></pre>
<ul>
<li><p><code>rtweet</code> (<a href="https://cran.r-project.org/web/packages/rtweet/index.html">Kearney, 2020</a>), for collecting tweets</p>
<ul>
<li>alternatives: used to be <code>twitteR</code> (<a href="https://cran.r-project.org/web/packages/twitteR/index.html">Gentry, 2015</a>), but not anymore; <a href="https://blog.twitter.com/developer/en_us/topics/tips/2020/running-the-python-package-for-search-tweets-in-r.html">running Python code in R</a></li>
</ul></li>
</ul>
<table style="width:4%;">
<colgroup>
<col width="4%" />
</colgroup>
<tbody>
<tr class="odd">
<td><br></td>
</tr>
<tr class="even">
<td>- <code>httpuv</code> (<a href="https://cran.r-project.org/web/packages/httpuv/index.html">Cheng &amp; Chang, 2020</a>), for API authorization</td>
</tr>
<tr class="odd">
<td>- alternative: using your own access tokens
- necessitates making an application through a developer
- has advantages that we will discuss later on</td>
</tr>
</tbody>
</table>
<p>class: action</p>
</div>
<div id="r-packages-install-from-within-rstudio-1" class="section level2">
<h2>R Packages — Install from within RStudio</h2>
<pre class="r"><code>install.packages(c(&quot;rtweet&quot;, &quot;httpuv&quot;, &quot;tidyverse&quot;, &quot;tidytext&quot;))</code></pre>
<ul>
<li><p><code>tidyverse</code> (<a href="https://cran.r-project.org/web/packages/tidyverse/index.html">Wickham &amp; RStudio 2019</a>), for various tasks</p>
<ul>
<li>including data manipulation, visualisation</li>
<li>alternative: e.g., <code>base</code> R</li>
</ul></li>
</ul>
<table style="width:4%;">
<colgroup>
<col width="4%" />
</colgroup>
<tbody>
<tr class="odd">
<td><br></td>
</tr>
<tr class="even">
<td>- <code>tidytext</code> (<a href="https://cran.r-project.org/web/packages/tidytext/index.html">Robinson &amp; Silge, 2021</a>), for working with text as data</td>
</tr>
<tr class="odd">
<td>- alternative: e.g., <code>quanteda</code> (<a href="https://cran.r-project.org/web/packages/quanteda/index.html">Benoit et al., 2020</a>)</td>
</tr>
</tbody>
</table>
</div>
<div id="twitter-authorisation" class="section level2">
<h2>Twitter — Authorisation</h2>
<p>Authorization to use Twitter APIs requires at least three steps<sup>*</sup></p>
<ol style="list-style-type: decimal">
<li>open a user account on Twitter</li>
</ol>
<ul>
<li>a personal or an institutional (perhaps, for a research project) one</li>
<li>done once, takes minutes</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>with that user account, apply for a developer account</li>
</ol>
<ul>
<li>so that you are recognised as a developer, have access to the <a href="https://developer.twitter.com/en/portal">developer portal</a></li>
<li>done once per account, .yellow-h[takes days to get approved manually]</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li>with that developer account, register a Twitter app</li>
</ol>
<ul>
<li>so that you have the keys and tokens for authorisation</li>
<li>repeated for every project, takes minutes</li>
</ul>
<p>.footnote[</p>
<p><sup>*</sup> There may be additional steps, such as registering for the <a href="https://developer.twitter.com/en/portal/petition/academic/is-it-right-for-you">Academic Research product track</a>.</p>
<p>]</p>
<p>class: action</p>
</div>
<div id="twitter-open-an-account" class="section level2">
<h2>Twitter — Open an Account</h2>
<p>Sign up for Twitter at <a href="twitter.com">https://twitter.com/</a></p>
<ul>
<li><p>a pre-condition for interacting with Twitter APIs</p>
<ul>
<li>e.g., you must be authorized
<ul>
<li>even to use <code>rtweet</code>’s app — <code>rstats2twitter</code></li>
</ul></li>
</ul></li>
</ul>
<p><br>
- helpful for getting to know what you study</p>
<pre><code>- e.g., the written and unwritten rules that mediate the behaviour on Twitter
    - as discussed [in Part 1](#potential-biases)</code></pre>
<p><br>
- with a strategic username</p>
<ul>
<li>usernames are changeable, but nevertheless public
<ul>
<li>either choose an anonymous username (e.g., <code>asdf029348</code>)</li>
<li>or choose one carefully — they become a part of users’ online presence</li>
</ul></li>
</ul>
<p>name: part3
class: inverse, center, middle</p>
</div>
</div>
<div id="part-3.-data-collection" class="section level1">
<h1>Part 3. Data Collection</h1>
<p>.footnote[</p>
<p><a href="#contents-slide">Back to the contents slide</a>.</p>
<div id="section" class="section level2">
<h2>]</h2>
</div>
<div id="data-collection-overview-apis" class="section level2">
<h2>Data Collection — Overview — APIs</h2>
<ul>
<li><p>We will collect data through APIs</p>
<ul>
<li>i.e., Twitter’s <a href="https://developer.twitter.com/en/docs/twitter-api/v1">Standard v1.1</a> APIs</li>
<li>provides more variables than available through browsers</li>
<li>comes with rules and restrictions
<ul>
<li>enforced through authentication</li>
</ul></li>
</ul></li>
</ul>
<table style="width:4%;">
<colgroup>
<col width="4%" />
</colgroup>
<tbody>
<tr class="odd">
<td><br></td>
</tr>
<tr class="even">
<td>- Collecting data through web scraping is also possible</td>
</tr>
<tr class="odd">
<td>- e.g., with <code>GetOldTweets3</code> — <a href="https://pypi.org/project/GetOldTweets3/">a python library</a>
- scrapes, scrolls down, and scrapes again to collect all matching data
<br>
- does not require, is not limited by, Twitter APIs
- limited with what is available on browsers
- may or may not be ethical and/or legal</td>
</tr>
</tbody>
</table>
</div>
<div id="data-collection-overview-apis-types" class="section level2">
<h2>Data Collection — Overview — APIs — Types</h2>
<ul>
<li><p>.yellow-h[In general], there are two main types of APIs</p>
<ul>
<li>REST and Streaming</li>
<li>applies to APIS elsewhere, not just at Twitter</li>
<li>functions, arguments, behaviour differ slightly</li>
</ul></li>
</ul>
<p>–</p>
<p><br></p>
<ul>
<li><p>REST APIs are for single, one-off requests</p>
<ul>
<li>e.g., search for tweets posted in the last 6 to 9 days</li>
<li>but also, post or delete tweets</li>
</ul></li>
</ul>
<p>–</p>
<p><br></p>
<ul>
<li><p>Streaming APIs are for continuous requests</p>
<ul>
<li>e.g., collect tweets as they are being posted</li>
</ul></li>
</ul>
</div>
<div id="data-collection-overview-standard-v1.1-apis" class="section level2">
<h2>Data Collection — Overview — Standard v1.1 APIs</h2>
<ul>
<li><p>We will collect data through Twitter’s Standard v1.1 APIs</p>
<ul>
<li>free of charge</li>
<li>thanks to <code>rweet</code>’s <code>rstats2twitter</code> app, can be used immediately</li>
<li>comes with the strictest of restrictions
- e.g., searches tweets posted in the last 6 to 9 days</li>
</ul></li>
</ul>
<table style="width:4%;">
<colgroup>
<col width="4%" />
</colgroup>
<tbody>
<tr class="odd">
<td><br></td>
</tr>
<tr class="even">
<td>- You can surpass these restrictions later on</td>
</tr>
<tr class="odd">
<td>- academic researchers can apply for the newly announced the <a href="https://twitter.com/TwitterDev/status/1354143047324299264">Academic Research product track</a>
- others can purchase an alternative
- the principles of data collection are likely to remain the same
- <code>rweet</code> has the <code>search_30day</code> and <code>search_fullarchive</code> functions for the <a href="https://developer.twitter.com/en/products/twitter-api/premium-apis">Premium V1.1</a> APIs
- the package may require an update, in line with the <a href="https://twitter.com/TwitterDev/status/1354143047324299264">Academic Research product track</a></td>
</tr>
</tbody>
</table>
</div>
<div id="data-collection-overview-apis-limitations" class="section level2">
<h2>Data Collection — Overview — APIs — Limitations</h2>
<p>Our attempts to collect data will be limited for various reasons, including</p>
<ul>
<li>the intended restrictions by Twitter
<ul>
<li>by the limitations of Standard v1.1
<ul>
<li>e.g., by rate limits
<ul>
<li>maximum number of requests</li>
<li>per app, type of request, time interval</li>
</ul></li>
</ul></li>
</ul></li>
</ul>
<p>–</p>
<ul>
<li>any lack of tweets or users matching our search criteria
<ul>
<li>stricter the criteria, more likely to occur</li>
</ul></li>
</ul>
<p>–</p>
<ul>
<li>connections timing out
<ul>
<li>depends on type of requests, and your internet connection</li>
<li>more likely for continuous searches</li>
</ul></li>
</ul>
<p>–</p>
<ul>
<li>reasons unknown to humankind
<ul>
<li>sometimes things just happen</li>
</ul></li>
</ul>
</div>
<div id="data-collection-rtweet-basics" class="section level2">
<h2>Data Collection — <code>rtweet</code> — Basics</h2>
<p>There are four main groups of functions to collect .yellow-h[historical] data, starting with</p>
<ul>
<li><strong><code>search_</code></strong>
<ul>
<li>such as <code>search_tweets</code> or <code>search_users</code></li>
<li>4 functions, for general use
- 2 for standard APIs, 2 for premium APIs</li>
</ul></li>
</ul>
<p>–</p>
<ul>
<li><strong><code>lookup_</code></strong>
<ul>
<li>such as <code>lookup_tweets</code> or <code>lookup_users</code></li>
<li>5 functions, for expanding an existing variable into a dataset
- e.g., starting with a list of IDs for tweets or users</li>
</ul></li>
</ul>
<p>–</p>
<ul>
<li><strong><code>get_</code></strong>
<ul>
<li>such as <code>get_followers</code> or <code>get_friends</code></li>
<li>11 functions, for specific tasks</li>
</ul></li>
</ul>
<p>–</p>
<ul>
<li><strong><code>lists_</code></strong>
<ul>
<li>such as <code>lists_members</code> or <code>lists_statuses</code></li>
<li>6 functions, for tasks related to <a href="https://help.twitter.com/en/using-twitter/twitter-lists#:~:text=A%20List%20is%20a%20curated,the%20accounts%20on%20that%20List.">Twitter lists</a> specifically</li>
</ul></li>
</ul>
<p>class: action</p>
</div>
<div id="data-collection-start-your-script" class="section level2">
<h2>Data Collection — Start Your Script</h2>
<p>.pull-left[</p>
<ul>
<li>Check that you are in the right project
<ul>
<li>created in <a href="#part2">Part 2</a></li>
<li>indicated at the upper-right corner of RStudio window</li>
</ul></li>
<li>Create a new R Script, following from the RStudio menu</li>
</ul>
<blockquote>
<p><code>File -&gt; New File -&gt; R Script</code></p>
</blockquote>
<ul>
<li>Name and save your file
<ul>
<li>to avoid the <code>Untitled123</code> problem</li>
<li>e.g., <code>data_collection.R</code></li>
</ul></li>
<li>Load the <code>rtweet</code> and other packages
<ul>
<li>no need to load the <code>httpuv</code> package, enough if installed</li>
</ul></li>
</ul>
<p>]</p>
<p>.pull-right[</p>
<pre class="r"><code>library(rtweet)
library(tidyverse)
library(tidytext)</code></pre>
<p>]</p>
</div>
<div id="data-collection-search_tweets" class="section level2">
<h2>Data Collection — <code>search_tweets</code></h2>
<p>.pull-left[</p>
<p>Collect tweets posted in the last 6 to 9 days
- filter by search query, with the <code>q</code> argument</p>
<ul>
<li>limited to 18,000 tweets, per 15 minutes, per token<sup>*</sup>
<ul>
<li>set the limit, higher or lower, with the <code>n</code> argument<sup>**</sup>
<ul>
<li>works best the multiples of 100<br />
<br></li>
</ul></li>
<li>if set higher, wait automatically by setting the <code>retryonratelimit</code> argument to <code>TRUE</code></li>
</ul></li>
</ul>
<p>]</p>
<p>.pull-right[</p>
<pre class="r"><code>search_tweets(q,
              n = 100,
              type = &quot;recent&quot;,
              include_rts = TRUE,
              geocode = NULL,
              max_id = NULL,
              parse = TRUE,
              token = NULL,
              retryonratelimit = FALSE,
              verbose = TRUE,
              ...
)</code></pre>
<p>]</p>
<p>.footnote[</p>
<p><sup>*</sup> All limits are for the standard v1.1 APIs.</p>
<p><sup>**</sup>This argument is common to many functions in the package. I recommend setting it to a small number, such as 200, for the exercises in this workshop. This will save computation time and avoid running into rate limits.</p>
<p>]</p>
<p>class: action</p>
</div>
<div id="exercises" class="section level2">
<h2>Exercises</h2>
<ol style="list-style-type: decimal">
<li>Collect the top 300 tweets that</li>
</ol>
<ul>
<li>include the hashtag “AcademicTwitter”</li>
<li>and assign the resulting data frame to <code>df_tweets</code>
<ul>
<li>so that you can observe the results with ease</li>
<li>hence, I recommend doing the same for all APIs searches that follow</li>
</ul></li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>Observe how the <code>rstats2twitter</code> app works</li>
</ol>
<ul>
<li>when you call the function, pay attention to what happens on your R console and on your default browser
<ul>
<li>this will happen only once per R session</li>
</ul></li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li>Take some time to explore the data frame</li>
</ol>
<ul>
<li>see which variables are in there, and how they are called</li>
<li>think about how you could use these variables for research</li>
<li>hint: use functions like <code>View</code>, <code>str</code>, <code>names</code>, <code>tibble::glimpse</code></li>
</ul>
<ol start="4" style="list-style-type: decimal">
<li>Conduct the same search on a browser</li>
</ol>
<ul>
<li>using the <a href="https://twitter.com/search-advanced">advanced search form</a></li>
<li>compare and contrast the API- and browser-based searches</li>
</ul>
<div class="countdown" id="timer_602630ff" style="top:0;right:0;" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">15</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
<div id="data-collection-search_tweets-1" class="section level2">
<h2>Data Collection — <code>search_tweets</code></h2>
<p>.pull-left[</p>
<p>Collect the .yellow-h[top] .yellow-h[200] tweets that
- include the .yellow-h[word] “publish”</p>
<p>]</p>
<p>.pull-right[</p>
<pre class="r"><code>search_tweets(q = `&quot;p`ublish&quot;,
              `n = 200`,
              `type = &quot;popular&quot;`)</code></pre>
<p>]</p>
</div>
<div id="data-collection-search_tweets-2" class="section level2">
<h2>Data Collection — <code>search_tweets</code></h2>
<p>.pull-left[</p>
<ul>
<li>Collect the top 200 tweets that
<ul>
<li>include the word “publish” .yellow-h[or] “perish”</li>
</ul></li>
</ul>
<p><br></p>
<ul>
<li>Note that
<ul>
<li>the boolean OR operator must be specified, in capital letters</li>
</ul></li>
</ul>
<p>]</p>
<p>.pull-right[</p>
<pre class="r"><code>search_tweets(q = `&quot;publish OR perish&quot;`,
              n = 200,
              type = &quot;popular&quot;)</code></pre>
<p>]</p>
</div>
<div id="data-collection-search_tweets-3" class="section level2">
<h2>Data Collection — <code>search_tweets</code></h2>
<p>.pull-left[</p>
<ul>
<li>Collect the top 200 tweets that
<ul>
<li>include “publish” but not “perish”</li>
</ul></li>
</ul>
<p><br></p>
<ul>
<li>Note that
<ul>
<li>words can be negated with a hyphen .yellow-h[-]</li>
</ul></li>
</ul>
<p>]</p>
<p>.pull-right[</p>
<pre class="r"><code>search_tweets(q = &quot;publish `-perish`&quot;,
              n = 200,
              type = &quot;popular&quot;)</code></pre>
<p>]</p>
</div>
<div id="data-collection-search_tweets-4" class="section level2">
<h2>Data Collection — <code>search_tweets</code></h2>
<p>.pull-left[</p>
<p>Collect the top 200 tweets that
- include “publish”, and
- are .yellow-h[not] in German</p>
<p>Note that
- operators can be negated with a hyphen as well</p>
<p>]</p>
<p>.pull-right[</p>
<pre class="r"><code>search_tweets(q = &quot;publish `-`lang:de&quot;,
              n = 200,
              type = &quot;popular&quot;)</code></pre>
<p>]</p>
</div>
<div id="data-collection-search_tweets-notes" class="section level2">
<h2>Data Collection — <code>search_tweets</code> — Notes</h2>
<ul>
<li><p>This function returns a data frame</p>
<ul>
<li>as do many other functions in the package</li>
<li>because, by default, <code>parse = TRUE</code></li>
</ul></li>
</ul>
<p><br></p>
<ul>
<li><p>Under the hood, Twitter APIs return nested lists</p>
<ul>
<li>nested lists can be tidied into rectangular shape, but not tidy data as they are returned</li>
<li><code>rtweet</code> does most of the data preparation for us</li>
</ul></li>
</ul>
</div>
<div id="data-collection-search_users" class="section level2">
<h2>Data Collection — <code>search_users</code></h2>
<p>.pull-left[
- Collect information on users</p>
<ul>
<li>filter usernames, names, bios</li>
<li>by search query with the <code>q</code> argument</li>
<li>returns information from recently active users</li>
<li>limited to 1,000 users</li>
</ul>
<p><br></p>
<ul>
<li><p>Note that</p>
<ul>
<li>there is no <code>retryonratelimit</code> argument</li>
<li>you can still use the <a href="https://developer.twitter.com/en/docs/twitter-api/v1/tweets/search/guides/standard-operators">complete list of search operators</a> and <a href="https://twitter.com/search-advanced">this advanced search form</a> for help with queries</li>
</ul></li>
</ul>
<p>]</p>
<p>.pull-right[</p>
<pre class="r"><code>search_users(q, 
             n = 100, 
             parse = TRUE, 
             token = NULL, 
             verbose = TRUE)</code></pre>
<p>]</p>
</div>
<div id="data-collection-notes-rate_limit" class="section level2">
<h2>Data Collection — Notes — <code>rate_limit</code></h2>
<p>.pull-left[</p>
<ul>
<li><p>Check rate limits at any time</p>
<ul>
<li>for all operations</li>
<li>for a specific operation
<ul>
<li>e.g., searching tweets with the <code>search_tweets</code> function</li>
</ul></li>
</ul></li>
</ul>
<p><br></p>
<ul>
<li><p>Note that</p>
<ul>
<li>if no token is specified, the function uses the <code>rstats2twitter</code> app</li>
<li>rate limits decrease as you use them, increase again after a time threshold</li>
<li><a href="https://developer.twitter.com/en/developer-terms/agreement-and-policy">Twitter Developer terms</a> do not allow for multiple tokens to be used for the same project</li>
</ul></li>
</ul>
<p>]</p>
<p>.pull-right[</p>
<pre class="r"><code>rate_limit(token = NULL, 
           query = NULL, 
           parse = TRUE)</code></pre>
<p>]</p>
<p>class: action</p>
</div>
<div id="exercises-1" class="section level2">
<h2>Exercises</h2>
<ol start="12" style="list-style-type: decimal">
<li>Check all your remaining rate limits</li>
</ol>
<ul>
<li>hint: assign the call <code>rate_limit</code> to a name
<ul>
<li>so that you can observe the resulting data frame better</li>
</ul></li>
</ul>
<p><br></p>
<ol start="13" style="list-style-type: decimal">
<li>Check your remaining limits for the <code>search_tweets</code> function</li>
</ol>
<ul>
<li>assign it to a name so that you can remember</li>
</ul>
<p><br></p>
<ol start="14" style="list-style-type: decimal">
<li>Collect the top 5000 tweets that</li>
</ol>
<ul>
<li>include the word “PhD”</li>
<li>and posted by a verified account</li>
</ul>
<p><br></p>
<ol start="15" style="list-style-type: decimal">
<li>Check your remaining limits for the <code>search_tweets</code> function again</li>
</ol>
<ul>
<li>how do they compare to the results from exercise 13?</li>
</ul>
<div class="countdown" id="timer_60262f0f" style="top:0;right:0;" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">10</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
<div id="data-collection-lookup_tweets" class="section level2">
<h2>Data Collection — <code>lookup_tweets</code></h2>
<p>.pull-left[</p>
<ul>
<li><p>Collect data on one or more tweets</p>
<ul>
<li>whose status ID you already know</li>
<li>limited with 90,000 posts per 15 minutes
<ul>
<li>there is no <code>retryonratelimit</code> argument</li>
</ul></li>
</ul></li>
</ul>
<p><br>
- Note that</p>
<ul>
<li>this function would be useful for replicating studies</li>
<li>status IDs are visible on browsers
<ul>
<li>if you click on a specific tweet
]</li>
</ul></li>
</ul>
<p>.pull-right[</p>
<pre class="r"><code>lookup_tweets(statuses, 
              parse = TRUE, 
              token = NULL)</code></pre>
<p>]</p>
</div>
<div id="data-collection-lookup_users" class="section level2">
<h2>Data Collection — <code>lookup_users</code></h2>
<p>.pull-left[</p>
<ul>
<li><p>Collect data on one or more users</p>
<ul>
<li>whose user ID or username you already know</li>
<li>limited with 90,000 users per 15 minutes
<ul>
<li>there is no <code>retryonratelimit</code> argument</li>
</ul></li>
</ul></li>
</ul>
<p><br></p>
<ul>
<li><p>Note that</p>
<ul>
<li>usernames can change</li>
<li>rely on user IDs where possible
]</li>
</ul></li>
</ul>
<p>.pull-right[</p>
<pre class="r"><code>lookup_users(users, 
             parse = TRUE, 
             token = NULL)</code></pre>
<p>]</p>
</div>
<div id="data-collection-lookup_friendships" class="section level2">
<h2>Data Collection — <code>lookup_friendships</code></h2>
<p>.pull-left[</p>
<ul>
<li><p>Collect data on friendship status of two users</p>
<ul>
<li>e.g., whether they follow each other</li>
<li>whose user ID or username you already know</li>
<li>limited with 90,000 users per 15 minutes
<ul>
<li>there is no <code>retryonratelimit</code> argument</li>
</ul></li>
</ul></li>
</ul>
<p><br></p>
<ul>
<li><p>Note that</p>
<ul>
<li>usernames can change</li>
<li>rely on user IDs where possible
]</li>
</ul></li>
</ul>
<p>.pull-right[</p>
<pre class="r"><code>lookup_friendships(source, 
                   target, 
                   parse = TRUE, 
                   token = NULL)</code></pre>
<p>]</p>
<p>class: middle, center</p>
</div>
</div>
<div id="get_" class="section level1">
<h1><code>get_</code></h1>
<div id="data-collection-get_timeline" class="section level2">
<h2>Data Collection — <code>get_timeline</code></h2>
<p>.pull-left[</p>
<p>Collect the most recent 200 tweets by David Robinson
- e.i., tweets from the user-timeline of .yellow-h[one] user</p>
<p>]</p>
<p>.pull-right[</p>
<pre class="r"><code>search_tweets(user = &quot;drob&quot;,
              n = 200)</code></pre>
<p>]</p>
</div>
<div id="data-collection-get_timeline-home-timeline" class="section level2">
<h2>Data Collection — <code>get_timeline</code> — Home Timeline</h2>
<p>.pull-left[</p>
<ul>
<li>The <a href="https://cran.r-project.org/web/packages/rtweet/rtweet.pdf">package documentation</a> suggests that <code>get_timeline</code> can also retrieve home-timelines
<ul>
<li>i.e., the tweets that appear on a given user’s home, as posted by accounts followed by that user
<ul>
<li>if the <code>home</code> argument is set to <code>TRUE</code></li>
</ul></li>
</ul></li>
<li>This does not seem to be true
<ul>
<li>this code returns your home-timeline, not Wickham’s
<ul>
<li>from the last 6 to 9 days</li>
</ul></li>
<li>the <code>user</code> argument is ignored when <code>home = TRUE</code></li>
<li>but the <code>user</code> argument cannot be missing</li>
</ul></li>
</ul>
<p>]</p>
<p>.pull-right[</p>
<pre class="r"><code>get_timeline(`user = &quot;hadleywickham&quot;`,
             n = 200, 
             `home = TRUE`)</code></pre>
<p>]</p>
</div>
<div id="data-collection-notes-retryonratelimit-iteration" class="section level2">
<h2>Data Collection — Notes — <code>retryonratelimit</code> — Iteration</h2>
<pre class="r"><code>datalist &lt;- list() # create an empty list, to be filled later

for(i in 1:length(df_users$screen_name)) { # for one user, in the data frame df_users, at a time
  
  if (rate_limit(query = &quot;application/rate_limit_status&quot;, token = tw_token)$remaining &gt; 2 &amp;
      rate_limit(query = &quot;get_timeline&quot;, token = tw_token)$remaining &gt; 20) { # if your are still under rate limit for this task
    
  dat &lt;- get_timeline(df$screen_name[i], n = 3200, # collect the tweets
                      token = tw_token)
  
  datalist[[i]] &lt;- dat # fill the list with data, for one user at a time
  
  }else{ # if there is no limit, wait a little
    
  wait &lt;- rate_limit(query = &quot;get_timeline&quot;)$reset + 0.1
  Sys.sleep(wait * 60)
    
  }
}

df_tweets &lt;- as.data.frame(do.call(rbind, datalist)) # put all data in one data frame</code></pre>
</div>
<div id="data-collection-get_followers" class="section level2">
<h2>Data Collection — <code>get_followers</code></h2>
<p>.pull-left[</p>
<ul>
<li><p>Collect a list of followers, following .yellow-h[one] user</p>
<ul>
<li>returns a single column of user IDs, not usernames</li>
<li>limited with 75,000 followers per 15 minutes
<ul>
<li>use <code>retryonratelimit = TRUE</code> to surpass the limit</li>
</ul></li>
</ul></li>
</ul>
<p><br><br />
- Note that</p>
<ul>
<li>this function does not accept multiple users</li>
<li>it can be combined with <code>lookup_users</code> if usernames are needed</li>
</ul>
<p>]</p>
<p>.pull-right[</p>
<pre class="r"><code>get_followers(user,
              n = 5000,
              page = &quot;-1&quot;,
              retryonratelimit = FALSE,
              parse = TRUE,
              verbose = TRUE,
              token = NULL
)</code></pre>
<p>]</p>
</div>
<div id="data-collection-get_friends" class="section level2">
<h2>Data Collection — <code>get_friends</code></h2>
<p>.pull-left[</p>
<p>Get a list of users, .yellow-h[followed by] .yellow-h[one or more] users</p>
<ul>
<li>this returns a single column of user IDs, not usernames</li>
<li>limited to 15 users
- use <code>retryonratelimit = TRUE</code> to surpass the limit<br />
<br></li>
<li>limited also to 5,000 followers per user
- here <code>retryonratelimit = TRUE</code> does not help<br />
<br></li>
<li>use the <code>page</code> argument instead to surpass the limit
- learn the correct value with the <code>next_cursor</code> argument
]</li>
</ul>
<p>.pull-right[</p>
<pre class="r"><code>get_friends(users,
            n = 5000,
            retryonratelimit = FALSE,
            page = &quot;-1&quot;,
            parse = TRUE,
            verbose = TRUE,
            token = NULL
)</code></pre>
<p>]</p>
<p>class: action</p>
</div>
<div id="exercises-2" class="section level2">
<h2>Exercises</h2>
<ol start="23" style="list-style-type: decimal">
<li>Collect a list of accounts following <em>Universität Luzern</em></li>
</ol>
<ul>
<li>search for the Unversity’s username with <code>search_users</code></li>
<li>search for the followers <code>get_followers</code></li>
</ul>
<p><br></p>
<ol start="24" style="list-style-type: decimal">
<li>Collect a list of accounts that <em>Universität Luzern</em> follows</li>
</ol>
<ul>
<li>find out more about these accounts with <code>lookup_users</code>
<ul>
<li>hint: use <code>df_friends$user_id</code> as the <code>users</code> argument</li>
</ul></li>
</ul>
<p><br></p>
<ol start="25" style="list-style-type: decimal">
<li>Check your rate limits</li>
</ol>
<div class="countdown" id="timer_6026325b" style="top:0;right:0;" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">07</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">30</span></code>
</div>
</div>
<div id="data-collection-get_favorites" class="section level2">
<h2>Data Collection — <code>get_favorites</code></h2>
<p>Collect a list of tweets liked by Jenny Bryan</p>
<pre class="r"><code>get_favorites(user = &quot;JennyBryan&quot;)</code></pre>
</div>
<div id="data-collection-get_retweets" class="section level2">
<h2>Data Collection — <code>get_retweets</code></h2>
<ul>
<li><p>Collect the most recent 50 retweets</p>
<ul>
<li>of the post announcing the <a href="https://twitter.com/TwitterDev/status/1354143047324299264">Academic Research product track</a></li>
</ul></li>
</ul>
<pre class="r"><code>get_retweets(status_id = &quot;1354143047324299264&quot;)</code></pre>
</div>
<div id="data-collection-get_trends" class="section level2">
<h2>Data Collection — <code>get_trends</code></h2>
<p>.pull-left[</p>
<ul>
<li><p>Collect information on twitter trends</p>
<ul>
<li>by town or country, specified with
<ul>
<li>the <code>woeid</code> argument,<sup>*</sup> or</li>
<li>the <code>lat</code> and <code>long</code> arguments</li>
</ul></li>
</ul></li>
</ul>
<p><br><br />
- Note that</p>
<ul>
<li>not all locations have trending data</li>
<li>use the <code>trends_available</code> function to check availability
<ul>
<li>with no argument</li>
</ul></li>
</ul>
<p>]</p>
<p>.pull-right[</p>
<pre class="r"><code>get_trends(woeid = 1,
           lat = NULL,
           lng = NULL,
           exclude_hashtags = FALSE,
           token = NULL,
           parse = TRUE
)</code></pre>
<p>]</p>
<p>.footnote[</p>
<p><sup>*</sup> It stands for “where on earth identifier”, which is 44418 for London. Google for more!</p>
<p>]</p>
<p>class: action</p>
</div>
<div id="exercises-3" class="section level2">
<h2>Exercises</h2>
<ol start="28" style="list-style-type: decimal">
<li>Collect a list of places where the trends data is available</li>
</ol>
<ul>
<li>hint: use the <code>trends_available</code> function</li>
</ul>
<p><br></p>
<ol start="29" style="list-style-type: decimal">
<li>Collect the lists of trends for two locations</li>
</ol>
<ul>
<li>compare and contrast the resulting data for two locations</li>
</ul>
<p><br></p>
<ol start="30" style="list-style-type: decimal">
<li>Collect the list of trends for your location</li>
</ol>
<ul>
<li>compare and contrast the resulting data with what you see on your browser</li>
</ul>
<div class="countdown" id="timer_60262fd3" style="top:0;right:0;" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">07</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">30</span></code>
</div>
</div>
<div id="data-collection-lists_memberships" class="section level2">
<h2>Data Collection — <code>lists_memberships</code></h2>
<p>.pull-left[</p>
<ul>
<li><p>Collect .yellow-h[data on lists], where one or more users are listed</p>
<ul>
<li>i.e., the lists where a user appears</li>
<li>limited to 200 lists</li>
</ul></li>
</ul>
<p>]</p>
<p>.pull-right[</p>
<pre class="r"><code>lists_memberships(user = NULL,
                  n = 200,
                  cursor = &quot;-1&quot;,
                  filter_to_owned_lists = FALSE,
                  token = NULL,
                  parse = TRUE,
                  previous_cursor = NULL
)</code></pre>
<p>]</p>
</div>
<div id="data-collection-lists_members" class="section level2">
<h2>Data Collection — <code>lists_members</code></h2>
<p>.pull-left[</p>
<ul>
<li><p>Collect .yellow-h[data on users] listed in .yellow-h[one] list</p>
<ul>
<li>specify the list with the <code>list_id</code> argument
<ul>
<li>e.g., with data from <code>lists_memberships</code></li>
</ul></li>
<li>or the <code>owner_user</code> .yellow-h[and] <code>slug</code> arguments together</li>
<li>limited to 5,000 members</li>
</ul></li>
</ul>
<p><br></p>
<ul>
<li><p>Note that</p>
<ul>
<li>lists also appear at twitter.com/USERNAME/lists</li>
<li>see, for example, <a href="https://twitter.com/tweetminster/lists">twitter.com/tweetminster/lists</a></li>
</ul></li>
</ul>
<p>]</p>
<p>.pull-right[</p>
<pre class="r"><code>lists_members(list_id = NULL,
              slug = NULL,
              owner_user = NULL,
              n = 5000,
              cursor = &quot;-1&quot;,
              token = NULL,
              parse = TRUE,
              ...
)</code></pre>
<p>]</p>
</div>
<div id="data-collection-lists_statuses" class="section level2">
<h2>Data Collection — <code>lists_statuses</code></h2>
<p>.pull-left[</p>
<p>Collect tweets from the timeline of a list</p>
<ul>
<li>i.e., tweets posted by those listed on a given list</li>
<li>specify the list with the <code>list_id</code> argument</li>
<li>or the <code>owner_user</code> .yellow-h[and] <code>slug</code> arguments together</li>
</ul>
<p>]</p>
<p>.pull-right[</p>
<pre class="r"><code>lists_statuses(list_id = NULL,
               slug = NULL,
               owner_user = NULL,
               since_id = NULL,
               max_id = NULL,
               n = 200,
               include_rts = TRUE,
               parse = TRUE,
               token = NULL
)</code></pre>
<p>]</p>
</div>
<div id="data-collection-lists_subscribers" class="section level2">
<h2>Data Collection — <code>lists_subscribers</code></h2>
<p>.pull-left[</p>
<p>Collect data on users subscribed to a given list</p>
<ul>
<li>i.e., users who are following a list</li>
<li>specify the list with the <code>list_id</code> argument</li>
<li>or with the <code>owner_user</code> and <code>slug</code> arguments</li>
<li>limited to 5,000 users</li>
</ul>
<p>]</p>
<p>.pull-right[</p>
<pre class="r"><code>lists_subscribers(list_id = NULL,
                  slug = NULL,
                  owner_user = NULL,
                  n = 20,
                  cursor = &quot;-1&quot;,
                  parse = TRUE,
                  token = NULL
)</code></pre>
<p>]</p>
</div>
<div id="data-collection-lists_subscriptions" class="section level2">
<h2>Data Collection — <code>lists_subscriptions</code></h2>
<p>.pull-left[</p>
<p>Collect data on the lists a user is subscribed to</p>
<ul>
<li>specify the user with <code>user</code> argument
<ul>
<li>takes user ID or username</li>
</ul></li>
<li>limited to 1,000 subscriptions</li>
</ul>
<p>]</p>
<p>.pull-right[</p>
<pre class="r"><code>lists_subscriptions(user, 
                    n = 20, 
                    cursor = &quot;-1&quot;, 
                    parse = TRUE, 
                    token = NULL)</code></pre>
<p>]</p>
<p>class: action</p>
</div>
<div id="exercises-4" class="section level2">
<h2>Exercises</h2>
<ol start="31" style="list-style-type: decimal">
<li>Collect data on lists where Hadley Wickham is listed</li>
</ol>
<ul>
<li>hint: Wickham’s username is “hadleywickham”</li>
</ul>
<p><br></p>
<ol start="32" style="list-style-type: decimal">
<li>For one of these lists, see who else is listed with Hadley Wickham</li>
</ol>
<ul>
<li>compare and contrast this data with what you can see on a browser</li>
</ul>
<p><br></p>
<ol start="33" style="list-style-type: decimal">
<li>Collect the latest posts from that list</li>
</ol>
<p><br></p>
<ol start="34" style="list-style-type: decimal">
<li>Collect data on users subscribed to that list</li>
</ol>
<p><br></p>
<ol start="35" style="list-style-type: decimal">
<li>For one of these users, see if they are subscribed to any other lists</li>
</ol>
<div class="countdown" id="timer_60262f3d" style="top:0;right:0;" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">10</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
<hr />
<p>class: middle, center</p>
</div>
</div>
<div id="stream_tweets" class="section level1">
<h1><code>stream_tweets</code></h1>
<div id="data-collection-stream_tweets" class="section level2">
<h2>Data Collection — <code>stream_tweets</code></h2>
<p>.pull-left[</p>
<ul>
<li><p>Collect a random sample of tweets being sent</p>
<ul>
<li>continuously</li>
</ul></li>
</ul>
<p><br>
- Note that</p>
<ul>
<li>the <code>timeout</code> function can be set to infinity</li>
<li>you are likely to run into connection problems at some point</li>
</ul>
<p>]</p>
<p>.pull-right[</p>
<pre class="r"><code>stream_tweets(q = &quot;&quot;,
              `timeout = Inf`)</code></pre>
<p>]</p>
</div>
<div id="data-collection-stream_tweets-1" class="section level2">
<h2>Data Collection — <code>stream_tweets</code></h2>
<p>.pull-left[</p>
<ul>
<li><p>Collect a random sample of tweets being sent</p>
<ul>
<li>for 30 seconds</li>
<li>filtered by .yellow-h[a search query]</li>
</ul></li>
</ul>
<p><br></p>
<ul>
<li><p>Note that</p>
<ul>
<li><code>q</code> accepts a comma separated character string</li>
</ul></li>
</ul>
<p>]</p>
<p>.pull-right[</p>
<pre class="r"><code>stream_tweets(q = `&quot;switzerland, schweiz,`
                   `suisse, svizzera&quot;,`
              timeout = 30)</code></pre>
<p>]</p>
</div>
<div id="data-collection-stream_tweets-2" class="section level2">
<h2>Data Collection — <code>stream_tweets</code></h2>
<p>.pull-left[</p>
<ul>
<li><p>Collect a random sample of tweets being sent</p>
<ul>
<li>for 30 seconds</li>
<li>filtered by .yellow-h[coordinates]</li>
</ul></li>
</ul>
<p>]</p>
<p>.pull-right[</p>
<pre class="r"><code>stream_tweets(q = `c(6.02, 45.77,` 
                  `10.44, 47.83),`
              timeout = 30)</code></pre>
<p>]</p>
<p>name: part4
class: inverse, center, middle</p>
</div>
</div>
<div id="part-4.-data-preperation" class="section level1">
<h1>Part 4. Data Preperation</h1>
<p>.footnote[</p>
<p><a href="#contents-slide">Back to the contents slide</a>.</p>
<p>]</p>
<div id="data-preperation-overview-strings" class="section level2">
<h2>Data Preperation — Overview — Strings</h2>
<ul>
<li><p>Most researchers would be interested in textual Twitter data</p>
<ul>
<li>tweets as a whole, but also specifically hashtags <em>etc</em>.</li>
</ul></li>
</ul>
<p>–</p>
<p><br></p>
<ul>
<li><p>There are many components of tweets as texts</p>
<ul>
<li>e.g., mentions, hashtags, emojis, links <em>etc</em>.</li>
<li>but also punctuation, white spaces, upper case letters <em>etc</em>.</li>
<li>some of these may need to be taken out before analysis</li>
</ul></li>
</ul>
<p>–</p>
<p><br></p>
<ul>
<li><p>I use the <code>stringr</code> package (<a href="https://cran.r-project.org/web/packages/stringr/index.html">Wickham, 2019</a>) for string operations</p>
<ul>
<li>part of the <code>tidyverse</code> family</li>
<li>you might have another favourite already
<ul>
<li>no need to change as long as it does the job</li>
</ul></li>
</ul></li>
</ul>
</div>
<div id="data-preperation-remove-mentions" class="section level2">
<h2>Data Preperation — Remove Mentions</h2>
<pre class="r"><code>tweet &lt;- &quot;These from @handle1 are #socool. 👏 A #mustsee, @handle2! 
          👉 t.co/aq7MJJ1
          👉 https://t.co/aq7MJJ2&quot;</code></pre>
<pre class="r"><code>str_remove_all(string = tweet, pattern = &quot;[@][\\w_-]+&quot;)</code></pre>
<p>.out-t[</p>
<p>[1] “This from are #socool. 👏 A #mustsee, !
👉 t.co/aq7MJJ1
👉 <a href="https://t.co/aq7MJJ2" class="uri">https://t.co/aq7MJJ2</a>”</p>
<p>]</p>
</div>
<div id="data-preperation-remove-links" class="section level2">
<h2>Data Preperation — Remove Links</h2>
<pre class="r"><code>tweet &lt;- &quot;These from @handle1 are #socool. 👏 A #mustsee, @handle2! 
          👉 t.co/aq7MJJ1
          👉 https://t.co/aq7MJJ2&quot;</code></pre>
<pre class="r"><code>str_remove_all(string = tweet, pattern = &quot;http\\S+\\s*&quot;)</code></pre>
<p>.out-t[</p>
<p>[1] “These from <span class="citation">@handle1</span> are. 👏 A, <span class="citation">@handle2</span>!
👉 t.co/aq7MJJ1”</p>
<p>]</p>
<p><br></p>
<ul>
<li><p>Notice that</p>
<ul>
<li>links come in various formats</li>
<li>you may need multiple or complicated regular expression patterns</li>
</ul></li>
</ul>
</div>
<div id="data-preperation-remove-emojis" class="section level2">
<h2>Data Preperation — Remove Emojis</h2>
<pre class="r"><code>tweet &lt;- &quot;These from @handle1 are #socool. 👏 A #mustsee, @handle2! 
          👉 t.co/aq7MJJ1
          👉 https://t.co/aq7MJJ2&quot;</code></pre>
<pre class="r"><code>iconv(x = tweet, from = &quot;latin1&quot;, to = &quot;ASCII&quot;, sub = &quot;&quot;)</code></pre>
<p>.out-t[</p>
<p>[1] “These from <span class="citation">@handle1</span> are #socool. A #mustsee, <span class="citation">@handle2</span>!
t.co/aq7MJJ1
<a href="https://t.co/aq7MJJ2" class="uri">https://t.co/aq7MJJ2</a>”</p>
<p>]</p>
<p>class: action</p>
</div>
<div id="exercises-5" class="section level2">
<h2>Exercises</h2>
<ol start="41" style="list-style-type: decimal">
<li>Remove mentions</li>
</ol>
<ul>
<li>hint: the pattern is <code>"[@][\\w_-]+"</code></li>
</ul>
<ol start="42" style="list-style-type: decimal">
<li>Remove hastags</li>
</ol>
<ul>
<li>hint: the pattern is <code>"[#][\\w_-]+"</code></li>
</ul>
<ol start="43" style="list-style-type: decimal">
<li>Remove links</li>
</ol>
<ul>
<li>by using the links from the <code>urls_t.co</code> variable</li>
</ul>
<ol start="44" style="list-style-type: decimal">
<li>Remove emojis</li>
</ol>
<ul>
<li>pull the help file for the <code>iconv</code> function first</li>
</ul>
<div class="countdown" id="timer_60263258" style="top:0;right:0;" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">10</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
<div id="data-preperation-remove-punctuations-alternative" class="section level2">
<h2>Data Preperation — Remove Punctuations — Alternative</h2>
<pre class="r"><code>tweet &lt;- &quot;This is a sentence.There is no space before this sentence.&quot;</code></pre>
<pre class="r"><code>str_`remove`_all(string = tweet, pattern = &quot;[[:punct:]]&quot;)</code></pre>
<p>.out-t[</p>
<p>[1] “This is a sentenceThere is no space before this sentence”</p>
<p>]</p>
<p>–</p>
<p><br></p>
<pre class="r"><code>str_`replace`_all(string = tweet, pattern = &quot;[[:punct:]]&quot;, replacement = &quot; &quot;)</code></pre>
<p>.out-t[</p>
<p>[1] “This is a sentence There is no space before this sentence”</p>
<p>]</p>
</div>
<div id="data-preperation-remove-repeated-whitespace" class="section level2">
<h2>Data Preperation — Remove Repeated Whitespace</h2>
<pre class="r"><code>tweet &lt;- &quot;There are too many spaces after this sentence.   This is a new sentence.&quot;</code></pre>
<pre class="r"><code>str_squish(string = tweet)</code></pre>
<p>.out-t[</p>
<p>[1] “There are too many spaces after this sentence. This is a new sentence.”</p>
<p>]</p>
<p>Note that
- white spaces can be introduced not only by users on Twitter, but also by us, while cleaning the data
- e.g., removing and/or replacing operations above
- hence, this function might be useful after other operations</p>
<p>class: action</p>
</div>
<div id="exercises-6" class="section level2">
<h2>Exercises</h2>
<ol start="45" style="list-style-type: decimal">
<li>Remove punctuations</li>
</ol>
<ul>
<li>by using the <code>str_replace_all</code> function</li>
<li>hint: the pattern is <code>[[:punct:]]</code></li>
</ul>
<p><br></p>
<ol start="46" style="list-style-type: decimal">
<li>Remove whitespace</li>
</ol>
<ul>
<li>hint: the function is called <code>str_squish</code></li>
</ul>
<p><br></p>
<ol start="47" style="list-style-type: decimal">
<li>Change case to lower case</li>
</ol>
<ul>
<li>hint: the function is called <code>str_to_lower</code></li>
</ul>
<div class="countdown" id="timer_602630fc" style="top:0;right:0;" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">10</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
<div id="data-preperation-change-unit-of-observation-aggregation" class="section level2">
<h2>Data Preperation — Change Unit of Observation — Aggregation</h2>
<p>Aggregate at the level of users</p>
<ul>
<li>the number of tweets per user</li>
</ul>
<pre class="r"><code># load the tweets dataset
df &lt;- read_rds(&quot;tweets.rds&quot;) %&gt;%
  
# group by users for aggregation  
  group_by(user_id) %&gt;%
  
# create summary statistics for variables of interest
  summarise(sum_tweets = n())</code></pre>
</div>
<div id="data-preperation-change-unit-of-observation-dis-aggregation" class="section level2">
<h2>Data Preperation — Change Unit of Observation — Dis-aggregation</h2>
<p>Disaggregate the tweets, by splitting them into smaller units
- also called .yellow-h[tokenisation]</p>
<p>Note that
- by default <code>sep = "[^[:alnum:].]+"</code>, which works well with separating tweets into words
- change this argument with a regular expression of your choice
- this creates a tidy dataset, where each observation is a word
- all other tweet-level variables are repeated for each observation</p>
<pre class="r"><code># load the tweets dataset
df &lt;- read_rds(&quot;tweets.rds&quot;) %&gt;%
  
# split the variable `text`  
    separate_rows(text)</code></pre>
</div>
<div id="data-preperation-change-unit-of-observation-dis-aggregation-1" class="section level2">
<h2>Data Preperation — Change Unit of Observation — Dis-aggregation</h2>
<p>Tokenise variables to levels other than words
- e.g., characters, words (the default), sentences, lines</p>
<pre class="r"><code># load the tweets dataset
df &lt;- read_rds(&quot;tweets.rds&quot;) %&gt;%
  
# split the variable `text` into sentences, create a new variable called `da_tweets`    
    unnest_tokens(output = da_tweets, input = text, `token = &quot;sentences&quot;`)</code></pre>
</div>
<div id="data-preperation-remove-stop-words" class="section level2">
<h2>Data Preperation — Remove Stop Words</h2>
<p>Remove the common, uninformative words
- e.g., the, a, i</p>
<p>Note that
- this operation requires a tokenised-to-word variable
- stop words for English are stored in the <code>stop_words</code> dataset in the <code>tidytext</code> variable
- list of words for other languages are available elsewhere, including
- the <code>stopwordslangs</code> function from the <code>rtweet</code> package
- the <code>stopwords</code> function from the <code>tm</code> package
- e.g., use <code>tm::stopwords("german")</code> for German</p>
<pre class="r"><code># load the tweets dataset
df &lt;- read_rds(&quot;tweets.rds&quot;) %&gt;%
  
# split the variable `text`, create a new variable called `da_tweets`    
  unnest_tokens(output = da_tweets, input = text, token = &quot;tweets&quot;) %&gt;%
 
# remove rows that match any of the stop words as stored in the stop_words dataset 
  anti_join(stop_words, by = c(&quot;da_tweets&quot; = &quot;word&quot;))</code></pre>
<p>name: part5
class: inverse, center, middle</p>
</div>
</div>
<div id="part-5.-data-anaysis-users" class="section level1">
<h1>Part 5. Data Anaysis: Users</h1>
<p>.footnote[</p>
<p><a href="#contents-slide">Back to the contents slide</a>.</p>
<p>]</p>
<div id="analysing-users-correlates-of-being-on-twitter" class="section level2">
<h2>Analysing Users — Correlates of being on Twitter</h2>
<p><img src="public/teaching/twtr_workshop_files/figure-html/exercise_52-1.png" width="70%" style="display: block; margin: auto;" /></p>
</div>
<div id="analysing-users-correlates-of-having-more-followers" class="section level2">
<h2>Analysing Users — Correlates of having more followers</h2>
<p><img src="public/teaching/twtr_workshop_files/figure-html/exercise_54-1.png" width="70%" style="display: block; margin: auto;" /></p>
</div>
<div id="analysing-users-correlates-of-tweeting-more-often" class="section level2">
<h2>Analysing Users — Correlates of tweeting more often</h2>
<p><img src="public/teaching/twtr_workshop_files/figure-html/exercise_56-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>class: action</p>
</div>
<div id="exercises-7" class="section level2">
<h2>Exercises</h2>
<p>On <code>users.Rmd</code>, complete the following exercises</p>
<ol start="52" style="list-style-type: decimal">
<li><p>Correlates of being on Twitter</p></li>
<li><p>Who has the most followers?</p></li>
<li><p>Correlates of having more followers</p></li>
<li><p>Who tweets the most often?</p></li>
<li><p>Correlates of tweeting more often</p></li>
<li><p>Who do they talk to?</p></li>
</ol>
<div class="countdown" id="timer_602631e5" style="top:0;right:0;" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">45</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
<div id="analysing-users-network-analysis-overview" class="section level2">
<h2>Analysing Users — Network Analysis — Overview</h2>
<ul>
<li><p>Twitter data is suitable for network analysis</p>
<ul>
<li>a social network</li>
<li>studying the relations between users</li>
</ul></li>
</ul>
<p><br></p>
<ul>
<li><p>There are at least five networks</p>
<ul>
<li>networks of followers
<ul>
<li>directed, .yellow-h[not] reoccurring</li>
<li>e.g., who is following whom<br />
<br></li>
</ul></li>
<li>networks of retweeters, quoters, repliers, and likers
<ul>
<li>directed, reoccurring</li>
<li>e.g., who is replying to whom, .yellow-h[how often]</li>
</ul></li>
</ul></li>
</ul>
</div>
<div id="analysing-users-network-analysis-tidygraph" class="section level2">
<h2>Analysing Users — Network Analysis — <code>tidygraph</code></h2>
<p>.pull-left[</p>
<pre class="r"><code>read_rds(&quot;data/tweets.rds&quot;) %&gt;%
  filter(is_retweet == TRUE) %&gt;% 
  group_by(screen_name, retweet_screen_name) %&gt;%
  summarise(replies = n()) %&gt;% 
  head()</code></pre>
<p>]</p>
<p>.pull-right[</p>
<p>.out-t[</p>
<pre class="tab">
&#x23; A tibble: 6 x 3    
&#x23; Groups:   screen_name [1]     
  screen_name  retweet_screen_name   rts
  <chr>        <chr>               <int>
1 _OliviaBlake AlexDaviesJones         1
2 _OliviaBlake CommonsPAC              2
3 _OliviaBlake DanJarvisMP             3
4 _OliviaBlake DrRosena                1
5 _OliviaBlake EmmaHardyMP             1
6 _OliviaBlake FriendsLoxley           2
</pre>
<p>]</p>
</div>
<div id="section-1" class="section level2">
<h2>]</h2>
</div>
<div id="analysing-users-network-analysis-tidygraph-1" class="section level2">
<h2>Analysing Users — Network Analysis — <code>tidygraph</code></h2>
<p>.pull-left[</p>
<p>Use the <code>as_tbl_graph</code> function transform data frames</p>
<pre class="r"><code>read_rds(&quot;data/tweets.rds&quot;) %&gt;%
  filter(is_retweet == TRUE) %&gt;% 
  group_by(screen_name, retweet_screen_name) %&gt;%
  summarise(replies = n()) %&gt;% 
  `as_tbl_graph()`</code></pre>
<p>]</p>
<p>.pull-right[</p>
<p>.out-t[</p>
<pre class="tab">
&#x23; A tbl_graph: 7377 nodes and 16131 edges
&#x23;
&#x23; A directed multigraph with 5 components
&#x23;
&#x23; Node Data: 7,377 x 1 (active)
  name         
  <chr>        
1 _OliviaBlake 
2 _RobbieMoore 
3 AaronBell4NUL
4 ab4scambs    
5 abenaopp     
6 ABridgen     
&#x23; ... with 7,371 more rows
&#x23;
&#x23; Edge Data: 16,131 x 3
   from    to   rts
  <int> <int> <int>
1     1    19     1
2     1   550     2
3     1   119     3
&#x23; ... with 16,128 more rows
</pre>
<p>]</p>
<p>]</p>
</div>
<div id="analysing-users-network-analysis-ggraph" class="section level2">
<h2>Analysing Users — Network Analysis — <code>ggraph</code></h2>
<p>Once the nodes and edges are ready, use the <code>ggraph</code> package to visualise</p>
<ul>
<li>an extension of <code>ggplot2</code></li>
<li>many verbs are intuitively similar</li>
</ul>
<pre class="r"><code>ggraph(rt_network) +
  geom_edge_link() +
  geom_node_point(aes(color = party)) +
  theme_graph()</code></pre>
</div>
<div id="analysing-users-retweet-networks" class="section level2">
<h2>Analysing Users — Retweet networks</h2>
<p><img src="public/teaching/twtr_workshop_files/figure-html/exercise_59-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>class: action</p>
</div>
<div id="exercises-8" class="section level2">
<h2>Exercises</h2>
<p>On <code>users.Rmd</code>, complete the following exercises</p>
<ol start="58" style="list-style-type: decimal">
<li><p>Reply networks</p></li>
<li><p>Retweet networks</p></li>
<li><p>Who are more central in the retweet networks?</p></li>
<li><p>Something else interesting about MPs</p></li>
<li><p>Something interesting from your own data</p></li>
</ol>
<div class="countdown" id="timer_60263087" style="top:0;right:0;" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">45</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
<div id="analysing-tweets-overview" class="section level2">
<h2>Analysing Tweets — Overview</h2>
<ul>
<li><p>Twitter analysis often focuses on tweets</p>
<ul>
<li>e.g., text in the tweets, but also hashtags</li>
<li>as opposed to users who tweet them
<ul>
<li>not always mutually exclusive</li>
</ul></li>
<li>hard to supplement ordinary users with non-Twitter data</li>
</ul></li>
</ul>
<p>–</p>
<p><br></p>
<ul>
<li><p>There are at least two types of tweet-based analysis</p>
<ul>
<li>count things, and describe or correlate
<ul>
<li>e.g., how often a hashtag is tweeted
<ul>
<li>are shorter hashtags more likely to be tweeted than longer ones?</li>
</ul></li>
</ul></li>
<li>categorising tweets
<ul>
<li>e.g., with dictionaries
<ul>
<li>but also with other techniques such as machiene learning</li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</div>
<div id="analysing-tweets-what-day-of-the-week" class="section level2">
<h2>Analysing Tweets — What day of the week?</h2>
<p><img src="public/teaching/twtr_workshop_files/figure-html/exercise_64-1.png" width="70%" style="display: block; margin: auto;" /></p>
</div>
<div id="analysing-tweets-which-hastags-were-the-most-frequent" class="section level2">
<h2>Analysing Tweets — Which hastags were the most frequent?</h2>
<p><img src="public/teaching/twtr_workshop_files/figure-html/exercise_66-1.png" width="70%" style="display: block; margin: auto;" /></p>
</div>
<div id="analysing-tweets-sentiments-by-hours-of-the-day" class="section level2">
<h2>Analysing Tweets — Sentiments by Hours of the Day</h2>
<p><img src="public/teaching/twtr_workshop_files/figure-html/exercise_68-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>class: center, middle</p>
</div>
</div>
<div id="dictionary-methods" class="section level1">
<h1>Dictionary Methods</h1>
<div id="analysing-users-dictionary-methods-notes" class="section level2">
<h2>Analysing Users — Dictionary Methods — Notes</h2>
<ul>
<li><p>There are many ways to calculate scores</p>
<ul>
<li>depending on your research design</li>
</ul></li>
</ul>
<p><br></p>
<ul>
<li><p>Positive score could be</p>
<ul>
<li><code>sum(positive)</code></li>
<li><code>sum(positive) - sum(negative)</code></li>
<li><code>(sum(positive) - sum(negative)) / (sum(positive) + sum(negative))</code></li>
</ul></li>
<li><p>We will use</p>
<ul>
<li>the sentiment dictionary stored at <code>tidytext::get_sentiments("nrc")</code></li>
<li>the concreteness dictionary stored at <code>doc2concrete::mturk_list</code></li>
</ul></li>
</ul>
<hr />
</div>
<div id="analysing-tweets-sentiments-across-the-time-frame" class="section level2">
<h2>Analysing Tweets — Sentiments across the time frame</h2>
<p><img src="public/teaching/twtr_workshop_files/figure-html/exercise_69-1.png" width="70%" style="display: block; margin: auto;" /></p>
</div>
<div id="analysing-tweets-concreteness-in-different-types-of-tweets" class="section level2">
<h2>Analysing Tweets — Concreteness in different types of tweets</h2>
<p><img src="public/teaching/twtr_workshop_files/figure-html/exercise_71-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>class: action</p>
</div>
<div id="exercises-9" class="section level2">
<h2>Exercises</h2>
<p>On <code>tweets.Rmd</code>, complete the following exercises</p>
<ol start="69" style="list-style-type: decimal">
<li><p>Sentiments across the time frame</p></li>
<li><p>Sentiments in different types of tweets</p></li>
<li><p>Concreteness in different types of tweets</p></li>
<li><p>Concreteness by Hours of the Day</p></li>
<li><p>Something else interesting about MPs</p></li>
<li><p>Something interesting from your own data</p></li>
</ol>
<div class="countdown" id="timer_60262ea9" style="top:0;right:0;" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">45</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
<p>name: part8
class: inverse, center, middle</p>
</div>
</div>
<div id="part-8.-next-steps" class="section level1">
<h1>Part 8. Next Steps</h1>
<p>.footnote[</p>
<p><a href="#contents-slide">Back to the contents slide</a>.</p>
<p>]</p>
<p>class: action</p>
<div id="twitter-apply-for-a-developer-account" class="section level2">
<h2>Twitter — Apply for a Developer Account</h2>
<ul>
<li>On <a href="https://developer.twitter.com/">developer.twitter.com</a>, click <code>Apply</code>
<ul>
<li>at the top-right corner of the page<sup>*</sup></li>
<li>follow the instructions on consecutive pages</li>
</ul></li>
</ul>
<p><br></p>
<ul>
<li>Write a detailed case for your intended use of Twitter APIs
- not just that you are attending this workshop
- a quick application is likely to slow the review process
- as Twitter often asks for more details via email
- rejection is also a possibility</li>
</ul>
<p><br></p>
<ul>
<li>Carefully review the Twitter’s <a href="https://developer.twitter.com/en/developer-terms/agreement-and-policy">Developer Agreement and Policy</a>
- especially important if you will develop an app that
- others will use
- will write as well as read Twitter data</li>
</ul>
</div>
<div id="twitter-keys-and-tokens-notes" class="section level2">
<h2>Twitter — Keys and Tokens — Notes</h2>
<ul>
<li>Keys and tokens are personal
<ul>
<li>should not be shared with others
<ul>
<li>e.g., through replication files, when asking a question on <a href="https://stackoverflow.com/">Stack Overflow</a></li>
</ul></li>
</ul></li>
</ul>
<p>–</p>
<ul>
<li>Keys and tokens can be re-generated anytime
<ul>
<li>on your applications page, under the <code>Keys and tokens</code> tab</li>
<li>this requires updating your R script with the new tokens as well</li>
</ul></li>
</ul>
<p>–</p>
<ul>
<li>Twitter allows for further, optional settings involving keys and tokens
<ul>
<li>relevant, mostly, for apps to do more than just collecting tweets</li>
<li>e.g., settings for 3-legged OAuth
<ul>
<li>like <code>rstats2twitter</code>, to allow for other users to authenticate through a browser pop up</li>
</ul></li>
<li>not covered in this workshop</li>
</ul></li>
</ul>
</div>
<div id="data-collection-rtweet-authentication" class="section level2">
<h2>Data Collection — <code>rtweet</code> — Authentication</h2>
<p>There are two different methods of <a href="https://developer.twitter.com/en/docs/authentication/overview">authentication</a><br />
<br><br />
- through <code>rtweet</code>’s <code>rstats2twitter</code> app</p>
<ul>
<li>the app makes requests on your behalf</li>
<li>you simply approve this, via a browser that pops up</li>
<li>nice and easy, but comes with some limitations</li>
</ul>
<p>–</p>
<p><br></p>
<ul>
<li><p>through your own app</p>
<ul>
<li>you make requests on your behalf</li>
<li>through your own app that you register as a developer</li>
<li>takes a little effort, but comes with additional stability and functionality
- removing the dependency on <code>rstats2twitter</code>, over which you have no control
- getting rid of the pop up windows<br />
- not only for collecting tweets, but also posting your own tweets
- and, reading and writing your own direct messages</li>
</ul></li>
</ul>
</div>
<div id="data-collection-define-your-token-alternatives" class="section level2">
<h2>Data Collection — Define Your Token — Alternatives</h2>
<p>.pull-left[
- You may wish to put your keys and tokens elsewhere
- they are personal, just like a password</p>
<ul>
<li>There are at least two alternatives
<ul>
<li>.yellow-h[create a separate script, which you can then <code>source</code> at the top of your main script]</li>
</ul></li>
</ul>
<p>]</p>
<p>.pull-right[</p>
<p><code>keys_tokens.R</code></p>
<pre class="r"><code> tw_token &lt;- create_token(
    app = &quot;&quot;,
    consumer_key = &quot;&quot;,
    consumer_secret = &quot;&quot;,
    access_token = &quot;&quot;,
    access_secret = &quot;&quot;
   )</code></pre>
<p><code>data_collection.R</code></p>
<pre class="r"><code> library(rtweet)
 `source(&quot;keys_tokens.R&quot;)`</code></pre>
<p>]</p>
<p>name: reference-slide
class: inverse, center, middle</p>
</div>
</div>
<div id="references" class="section level1">
<h1>References</h1>
<p>.footnote[</p>
<p><a href="#contents-slide">Back to the contents slide</a>.</p>
<p>]</p>
<div id="references-1" class="section level2">
<h2>References</h2>
<p>Silge, J., &amp; Robinson, D. (2017). <a href="https://www.tidytextmining.com">Text mining with R: A tidy approach</a>. O’Reilly. Open access at</p>
<p>Silva, B. C., &amp; Proksch, S. O. (2020). <a href="https://doi.org/10.1017/S0003055420000817">Fake It ‘Til You Make It: A Natural Experiment to Identify European Politicians’ Benefit from Twitter Bots</a>. American Political Science Review, 1-7.</p>
<p>Sinnenberg, L., Buttenheim, A. M., Padrez, K., Mancheno, C., Ungar, L., &amp; Merchant, R. M. (2017). <a href="https://doi.org/10.2105/AJPH.2016.303512">Twitter as a tool for health research: A systematic review</a>. American Journal of Public Health, 107(1), 1–8.</p>
<p>Umit, R. (2017). <a href="https://doi.org/10.1080/13572334.2017.1283166">Strategic communication of EU affairs: An analysis of legislative behaviour on Twitter</a>. Journal of Legislative Studies, 23(1), 93–124.</p>
<p>Wickham, H. (2019). <a href="https://cran.r-project.org/web/packages/stringr/index.html">stringr: Simple, Consistent Wrappers for Common String Operations</a>. R package, version 1.4.0.</p>
<p>Wickham, H., Chang, W., Henry, L., Pedersen, T. L., Takahashi, K., Wilke, C., Woo, K., Yutani, H. and Dunnington, D. (2020). <a href="https://cran.r-project.org/web/packages/dplyr/index.html">dplyr: A grammar of data manipulation</a>. R package, version 0.8.5.</p>
<p>Wickham, H. and Grolemund, G. (2019). <a href="https://r4ds.had.co.nz">R for data science</a>. O’Reilly. Open access at <a href="https://r4ds.had.co.nz/">https://r4ds.had.co.nz</a>.</p>
<p>Wickham, H., RStudio (2019). <a href="tidyverse:%20Easily%20Install%20and%20Load%20the" title="Tidyverse">https://cran.r-project.org/web/packages/tidyverse/index.html</a>. R package, version 3.3.3.</p>
<p>Xie, Y. (2020). <a href="https://cran.r-project.org/web/packages/xaringan/index.html">xaringan: Presentation Ninja</a>. R package, version 0.19.</p>
<hr />
<p>class: middle, center</p>
</div>
<div id="the-workshop-ends-here." class="section level2">
<h2>The workshop ends here.</h2>
</div>
<div id="congradulations-for-making-it-this-far-and" class="section level2">
<h2>Congradulations for making it this far, and</h2>
</div>
<div id="thank-you-for-joining-me" class="section level2">
<h2>thank you for joining me!</h2>
<p>.footnote[</p>
<p><a href="#contents-slide">Back to the contents slide</a>.</p>
<p>]</p>
</div>
</div>
